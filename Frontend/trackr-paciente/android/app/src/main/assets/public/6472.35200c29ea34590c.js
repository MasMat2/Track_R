"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6472],{6472:(L,C,s)=>{s.r(C),s.d(C,{InformacionGeneralComponent:()=>K});var u=s(5861),g=s(6895),d=s(433),l=s(12),v=s(429),x=s(1135),b=s(9808),T=s(8505),A=s(2583),M=s(4384),e=s(1571),I=s(6558),Z=s(529);let U=(()=>{var r;class c{constructor(n){this.http=n,this.dataUrl="confirmacionCorreo/"}enviarCorreoConfirmacion(n){return this.http.post(this.dataUrl+"enviarCorreoConfirmacion",n)}}return(r=c).\u0275fac=function(n){return new(n||r)(e.LFG(Z.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),c})(),G=(()=>{var r;class c{constructor(n){this.http=n,this.dataUrl="genero/"}consultarGeneros(){return this.http.get(this.dataUrl)}}return(r=c).\u0275fac=function(n){return new(n||r)(e.LFG(Z.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),c})();const q=["formulario"];function y(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",48)(1,"ion-row")(2,"ion-col",21)(3,"ion-label"),e._uU(4,"Tu correo a\xfan no est\xe1 verificado."),e.qZA()(),e.TgZ(5,"ion-col",24)(6,"ion-button",49),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.reenviarConfirmacionCorreo(o.infoUsuario.correo))}),e._uU(7," Enviar correo de verificaci\xf3n "),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.xp6(6),e.Q6J("disabled",t.emailsubmiting)}}function N(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El nombre es requerido "),e.qZA())}function J(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El apellido es requerido "),e.qZA())}function P(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El apellido es requerido "),e.qZA())}function O(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"ion-datetime",52,53),e.NdJ("ionChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.calcularEdad())})("ngModelChange",function(o){e.CHM(t);const i=e.oxw().ngIf;return e.KtG(i.fechaNacimiento=o)}),e.qZA()}if(2&r){const t=e.oxw().ngIf;e.Q6J("ngModel",t.fechaNacimiento)}}function Q(r,c){if(1&r&&(e.TgZ(0,"ion-select-option",54),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.Q6J("value",t.idGenero),e.xp6(1),e.hij(" ",t.descripcion," ")}}function S(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El peso es requerido "),e.qZA())}function E(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," La estatura es requerida "),e.qZA())}function F(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El n\xfamero de tel\xe9fono es requerido "),e.qZA())}function w(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," El correo electr\xf3nico es requerido "),e.qZA())}function Y(r,c){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"ion-icon",51),e._uU(2," Ingresa un correo v\xe1lido "),e.qZA())}const H=function(){return{cssClass:"custom-select-action-sheet"}};function z(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"form",10,11),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.MAs(2),i=e.oxw();return e.KtG(i.enviarFormulario(o))}),e.TgZ(3,"div",12)(4,"ion-grid",13),e.YNc(5,y,8,1,"div",14),e.TgZ(6,"ion-row")(7,"ion-col",15)(8,"div",16)(9,"ion-label"),e._uU(10,"Nombre(s)"),e.qZA(),e.TgZ(11,"ion-item",17)(12,"ion-input",18,19),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.nombre=o)}),e.qZA()(),e.YNc(14,N,3,0,"div",20),e.qZA()()(),e.TgZ(15,"ion-row")(16,"ion-col",21)(17,"div",16)(18,"ion-label"),e._uU(19," Apellido Paterno "),e.qZA(),e.TgZ(20,"ion-item",17)(21,"ion-input",22,23),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.apellidoPaterno=o)}),e.qZA()(),e.YNc(23,J,3,0,"div",20),e.qZA()(),e.TgZ(24,"ion-col",24)(25,"div",16)(26,"ion-label"),e._uU(27," Apellido Materno "),e.qZA(),e.TgZ(28,"ion-item",17)(29,"ion-input",25,26),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.apellidoMaterno=o)}),e.qZA()(),e.YNc(31,P,3,0,"div",20),e.qZA()()(),e.TgZ(32,"ion-row")(33,"ion-col",15)(34,"div",16)(35,"ion-label"),e._uU(36," Fecha de Nacimiento "),e.qZA(),e.TgZ(37,"ion-item",27),e._UZ(38,"ion-datetime-button",28)(39,"ion-icon",29),e.TgZ(40,"ion-modal",30),e.YNc(41,O,2,1,"ng-template"),e.qZA()()()()(),e.TgZ(42,"ion-row")(43,"ion-col",15)(44,"div",16)(45,"ion-label"),e._uU(46," Edad "),e.qZA(),e.TgZ(47,"ion-item",31)(48,"ion-input",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.edadUsuario=o)}),e.qZA()()()()(),e.TgZ(49,"ion-row")(50,"ion-col",15)(51,"div",16)(52,"ion-label"),e._uU(53," G\xe9nero "),e.qZA(),e.TgZ(54,"ion-item",33)(55,"ion-select",34,35),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.idGenero=o)}),e.YNc(57,Q,2,2,"ion-select-option",36),e.qZA()()()()(),e.TgZ(58,"ion-row")(59,"ion-col",21)(60,"div",16)(61,"ion-label"),e._uU(62," Peso (kg) "),e.qZA(),e.TgZ(63,"ion-item",17)(64,"ion-input",37,38),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.peso=o)}),e.qZA(),e.TgZ(66,"ion-label",39),e._uU(67,"Kg"),e.qZA()(),e.YNc(68,S,3,0,"div",20),e.qZA()(),e.TgZ(69,"ion-col",24)(70,"div",16)(71,"ion-label"),e._uU(72," Estatura "),e.qZA(),e.TgZ(73,"ion-item",17)(74,"ion-input",40,41),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.estatura=o)}),e.qZA(),e.TgZ(76,"ion-label",39),e._uU(77,"Cm"),e.qZA()(),e.YNc(78,E,3,0,"div",20),e.qZA()()(),e.TgZ(79,"ion-row")(80,"ion-col",15)(81,"div",16)(82,"ion-label"),e._uU(83," Tel\xe9fono m\xf3vil "),e.qZA(),e.TgZ(84,"ion-item",17)(85,"ion-input",42,43),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.telefonoMovil=o)}),e.qZA()(),e.YNc(87,F,3,0,"div",20),e.qZA()()(),e.TgZ(88,"ion-row")(89,"ion-col",15)(90,"div",16)(91,"ion-label"),e._uU(92," Correo electr\xf3nico "),e.qZA(),e.TgZ(93,"ion-item",17)(94,"ion-input",44,45),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).ngIf;return e.KtG(a.correoPersonal=o)}),e.qZA()(),e.YNc(96,w,3,0,"div",20),e.YNc(97,Y,3,0,"div",20),e.qZA()()()()(),e.TgZ(98,"div",46)(99,"ion-button",47),e._uU(100," Guardar "),e.qZA()()()()}if(2&r){const t=c.ngIf,n=e.MAs(2),o=e.MAs(13),i=e.MAs(22),a=e.MAs(30),f=e.MAs(65),p=e.MAs(75),_=e.MAs(86),m=e.MAs(95),h=e.oxw();e.xp6(5),e.Q6J("ngIf",!t.correoConfirmado),e.xp6(7),e.Q6J("ngModel",t.nombre),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&(o.dirty||o.touched)),e.xp6(7),e.Q6J("ngModel",t.apellidoPaterno),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&(i.dirty||i.touched)),e.xp6(6),e.Q6J("ngModel",t.apellidoMaterno),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&(a.dirty||a.touched)),e.xp6(9),e.Q6J("keepContentsMounted",!0),e.xp6(8),e.Q6J("ngModel",h.edadUsuario),e.xp6(7),e.Q6J("interfaceOptions",e.DdM(22,H))("ngModel",t.idGenero),e.xp6(2),e.Q6J("ngForOf",h.generoList),e.xp6(7),e.Q6J("ngModel",t.peso),e.xp6(4),e.Q6J("ngIf",(null==f.errors?null:f.errors.required)&&(f.dirty||f.touched)),e.xp6(6),e.Q6J("ngModel",t.estatura),e.xp6(4),e.Q6J("ngIf",(null==p.errors?null:p.errors.required)&&(p.dirty||p.touched)),e.xp6(7),e.Q6J("ngModel",t.telefonoMovil),e.xp6(2),e.Q6J("ngIf",(null==_.errors?null:_.errors.required)&&(_.dirty||_.touched)),e.xp6(7),e.Q6J("ngModel",t.correoPersonal),e.xp6(2),e.Q6J("ngIf",(null==m.errors?null:m.errors.required)&&(m.dirty||m.touched)),e.xp6(1),e.Q6J("ngIf",!m.valid&&(m.dirty||m.touched)),e.xp6(2),e.Q6J("disabled",h.submiting||n.invalid||!n.dirty)}}let K=(()=>{var r;class c{constructor(n,o,i,a){this.usuarioService=n,this.alertController=o,this.confirmacionCorreoService=i,this.generoService=a,this.submiting=!1,this.emailsubmiting=!1,this.cargandoSubject=new x.X(!1),this.cargando$=this.cargandoSubject.asObservable(),(0,A.a)({"chevron-down":"assets/img/svg/chevron-down.svg",calendar:"assets/img/svg/calendar.svg"})}ngOnInit(){var n=this;return(0,u.Z)(function*(){yield n.consultarGeneros(),n.obtenerUsuario(),n.cargando$.subscribe(o=>{o?n.presentLoading():n.dismissLoading()})})()}onExit(){return!this.formulario.dirty||this.presentAlertSalir()}presentLoading(){var n=this;return(0,u.Z)(function*(){return n.loading=yield n.alertController.create({cssClass:"custom-alert-loading"}),yield n.loading.present()})()}dismissLoading(){var n=this;return(0,u.Z)(function*(){n.loading&&(yield n.loading.dismiss(),n.loading=null)})()}consultarGeneros(){var n=this;return(0,u.Z)(function*(){n.generoList=yield(0,b.n)(n.generoService.consultarGeneros())})()}obtenerUsuario(){this.informacionUsuario$=this.usuarioService.consultarInformacionGeneral().pipe((0,T.b)(n=>{this.infoUsuario=n,console.log(n),this.calcularEdad()}))}enviarFormulario(n){var o=this;return(0,u.Z)(function*(){if(n.invalid)return o.submiting=!1,v.CW(n),void o.presentAlertError("Campos requeridos","Debe completar todos los campos obligatorios");o.submiting=!0,o.cargandoSubject.next(!0),o.infoUsuario.correo=o.infoUsuario.correoPersonal,o.actualizarInformacionUsuario(o.infoUsuario)})()}actualizarInformacionUsuario(n){this.usuarioService.actualizarInformacionGeneral(n).subscribe({next:()=>{},error:()=>{this.submiting=!1,this.cargandoSubject.next(!1)},complete:()=>{this.submiting=!1,this.cargandoSubject.next(!1),this.presentAlertSuccess("Informaci\xf3n actualizada","La informaci\xf3n se actualiz\xf3 correctamente"),this.formulario.form.markAsPristine()}})}calcularEdad(){let o=v.KP(new Date(this.infoUsuario.fechaNacimiento),new Date);this.edadUsuario=o.years+" a\xf1os "}reenviarConfirmacionCorreo(n){this.emailsubmiting=!0,this.confirmacionCorreoService.enviarCorreoConfirmacion({correo:n,token:""}).subscribe({next:()=>{},error:()=>{},complete:()=>{this.emailsubmiting=!1}})}presentAlertSuccess(n,o){var i=this;return(0,u.Z)(function*(){yield(yield i.alertController.create({header:n,subHeader:o,buttons:["Ok"],cssClass:"custom-alert color-primary icon-check"})).present()})()}presentAlertError(n,o){var i=this;return(0,u.Z)(function*(){yield(yield i.alertController.create({header:n,message:o,buttons:["Ok"],cssClass:"custom-alert color-error icon-info"})).present()})()}presentAlertSalir(){var n=this;return(0,u.Z)(function*(){const o=yield n.alertController.create({header:"\xbfEst\xe1 seguro que desea salir?",subHeader:"Perder\xe1 los cambios que no haya guardado",cssClass:"custom-alert color-error icon-info two-buttons",backdropDismiss:!1,buttons:[{text:"Cancelar",role:"cancel",handler:()=>!1},{text:"Salir",handler:()=>!0}]});return yield o.present(),"cancel"!==(yield o.onDidDismiss()).role})()}}return(r=c).\u0275fac=function(n){return new(n||r)(e.Y36(I.i),e.Y36(l.Br),e.Y36(U),e.Y36(G))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-informacion-general"]],viewQuery:function(n,o){if(1&n&&e.Gf(q,5),2&n){let i;e.iGM(i=e.CRH())&&(o.formulario=i.first)}},standalone:!0,features:[e.jDz],decls:16,vars:3,consts:[[1,"ion-no-border"],[1,"contenedor-header-light"],["slot","start",1,"start"],["routerLink","inicio-perfil"],["slot","start","name","chevron-left"],[1,"primary"],[1,"contenedor-principal"],[1,"titulo"],["class","formulario",4,"ngIf"],[1,"formulario"],["novalidate","novalidate",3,"ngSubmit"],["formulario","ngForm"],[1,"contenido-formulario"],[1,"inputs","ion-no-padding"],["class","correoNoConfirmado",4,"ngIf"],["size","12"],[1,"input"],["lines","none",1,"general-input"],["id","nombre","name","nombre","type","text","required","true","maxlength","50","autocomplete","off","placeholder","Nombres",3,"ngModel","ngModelChange"],["nombres","ngModel"],["class","input-text-error",4,"ngIf"],["size","6",1,"padding-derecho"],["id","apePaterno","name","apellidoPaterno","type","text","required","true","maxlength","50","autocomplete","off","placeholder","Apellido Paterno",3,"ngModel","ngModelChange"],["apellidoPaterno","ngModel"],["size","6",1,"padding-izquierdo"],["id","apeMaterno","name","apellidoMaterno","type","text","required","true","maxlength","50","autocomplete","off","placeholder","Apellido Materno",3,"ngModel","ngModelChange"],["apellidoMaterno","ngModel"],["lines","none",1,"date-input"],["datetime","fechaNacimiento"],["name","calendar","slot","end","aria-hidden","true"],[3,"keepContentsMounted"],["lines","none",1,"general-input","input-disabled"],["id","edad","name","edad","type","text","readonly","true","disabled","true","required","true",3,"ngModel","ngModelChange"],["lines","none",1,"select-input"],["id","genero","name","generoName","interface","action-sheet","cancelText","Cancelar","placeholder","Seleccionar","toggleIcon","chevron-down",3,"interfaceOptions","ngModel","ngModelChange"],["genero","ngModel"],[3,"value",4,"ngFor","ngForOf"],["id","peso","name","peso","type","text","inputmode","numeric","maxlength","3","required","true","autocomplete","off","placeholder","Peso",3,"ngModel","ngModelChange"],["peso","ngModel"],["slot","end",1,"unidadMedida"],["id","estatura","name","estatura","type","text","inputmode","numeric","maxlength","3","required","true","autocomplete","off","placeholder","Estatura",3,"ngModel","ngModelChange"],["estatura","ngModel"],["id","telefono","name","telefono","type","tel","inputmode","tel","required","true","maxlength","10","autocomplete","off","placeholder","Tel\xe9fono m\xf3vil",3,"ngModel","ngModelChange"],["telefono","ngModel"],["id","correo","name","correo","type","email","inputmode","email","required","true","maxlength","50","autocomplete","off","placeholder","Correo electr\xf3nico","email","",3,"ngModel","ngModelChange"],["correo","ngModel"],[1,"botones","botones-column"],["type","submit",1,"dark",3,"disabled"],[1,"correoNoConfirmado"],[3,"disabled","click"],[1,"input-text-error"],["slot","start","name","info"],["color","morado-custom","name","fechaNacimiento","id","fechaNacimiento","presentation","date","showDefaultButtons","true","locale","es-ES","required","true",3,"ngModel","ionChange","ngModelChange"],["fechaNacimiento","ngModel"],[3,"value"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"div",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),e._UZ(5,"ion-icon",4),e.TgZ(6,"ion-label"),e._uU(7,"Atr\xe1s"),e.qZA()()()()()(),e.TgZ(8,"ion-content",5)(9,"div",6)(10,"div",7)(11,"ion-text")(12,"h3"),e._uU(13,"General"),e.qZA()()(),e.YNc(14,z,101,23,"div",8),e.ALo(15,"async"),e.qZA()()),2&n&&(e.xp6(14),e.Q6J("ngIf",e.lcZ(15,1,o.informacionUsuario$)))},dependencies:[g.ez,g.sg,g.O5,g.Ov,d.u5,d._Y,d.JJ,d.JL,d.Q7,d.nD,d.on,d.On,d.F,M.Bz,M.rH,d.UX,l.Pc,l.YG,l.Sm,l.wI,l.W2,l.x4,l.Mj,l.jY,l.Gu,l.gu,l.pK,l.Ie,l.Q$,l.Nd,l.t9,l.n0,l.yW,l.sr,l.ki,l.QI,l.j9,l.YI],styles:["ion-content[_ngcontent-%COMP%]{--keyboard-offset: 0 !important}.contenedor-principal[_ngcontent-%COMP%]{background:var(--primary-50)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{height:15vh}.correoNoConfirmado[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--error-200);text-align:center!important}.correoNoConfirmado[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: var(--primary-700);color:var(--neutral-50);--box-shadow: 0;font-family:var(--font-body);font-size:14px;width:100%;text-wrap:pretty!important;--border-radius: 8px !important}"]}),c})()}}]);