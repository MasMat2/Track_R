"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1085],{1085:(x,_,s)=>{s.r(_),s.d(_,{InfoDiagnosticosComponent:()=>Y});var p=s(5861),m=s(6895),u=s(433),c=s(4384),e=s(12),f=s(2583),r=s(9808),v=s(429),M=s(7930),o=s(1571),Z=s(6958),C=s(6203),T=s(9134),D=s(1814);function O(i,l){if(1&i&&(o.TgZ(0,"ion-select-option",21),o._uU(1),o.qZA()),2&i){const n=l.$implicit;o.Q6J("value",null==n?null:n.idPadecimiento),o.xp6(1),o.hij(" ",null==n?null:n.nombre," ")}}function A(i,l){if(1&i&&(o.ynx(0),o.YNc(1,O,2,2,"ion-select-option",18),o.BQk()),2&i){const n=o.oxw();o.xp6(1),o.Q6J("ngForOf",n.diagnosticoFiltradoList)}}function F(i,l){1&i&&(o.TgZ(0,"ion-select-option",22),o._uU(1,"No hay m\xe1s diagn\xf3sticos"),o.qZA())}function I(i,l){if(1&i){const n=o.EpF();o.TgZ(0,"ion-datetime",23,24),o.NdJ("ngModelChange",function(a){o.CHM(n);const d=o.oxw();return o.KtG(d.expedientePadecimientoDto.fechaDiagnostico=a)}),o.qZA()}if(2&i){const n=o.oxw();o.Q6J("ngModel",n.expedientePadecimientoDto.fechaDiagnostico)("max",n.fechaActual)}}function S(i,l){if(1&i&&(o.TgZ(0,"ion-select-option",21),o._uU(1),o.qZA()),2&i){const n=l.$implicit;o.Q6J("value",null==n?null:n.idUsuarioDoctor),o.xp6(1),o.hij(" ",null==n?null:n.nombre," ")}}const P=function(){return{cssClass:"custom-select-popover"}};let U=(()=>{var i;class l{constructor(t,a,d,g){this.entidadEstructuraService=t,this.expedientePadecimientoService=a,this.doctoresService=d,this.modalController=g,this.expedientePadecimientoDto=new M.D,this.btnSubmit=!1,this.fechaActual=(new Date).toISOString(),(0,f.a)({"chevron-up":"assets/img/svg/chevron-up.svg","chevron-down":"assets/img/svg/chevron-down.svg",calendar:"assets/img/svg/calendar.svg"})}ngOnInit(){this.consultarDiagnosticosSelector(),this.consultarDoctores()}consultarDiagnosticosSelector(){var t=this;return(0,p.Z)(function*(){return(0,r.n)(t.entidadEstructuraService.consultarDiagnosticosParaSelector()).then(a=>{t.diagnosticoFiltradoList=a.filter(d=>!t.diagnosticosUsuario.some(g=>g.idPadecimiento===d.idPadecimiento))})})()}consultarDoctores(){this.doctoresService.consultarExpediente().subscribe({next:t=>{this.misDoctoresList=t},error:()=>{},complete:()=>{}})}enviarFormulario(t){this.btnSubmit=!0,null==this.expedientePadecimientoDto.fechaDiagnostico&&(this.expedientePadecimientoDto.fechaDiagnostico=new Date),t.valid?this.agregarExpedientePadecimiento(this.expedientePadecimientoDto):(0,v.CW)(t)}agregarExpedientePadecimiento(t){this.expedientePadecimientoService.agregarPadecimiento(t).subscribe({next:()=>{},error:()=>{},complete:()=>{this.modalController.dismiss()}})}}return(i=l).\u0275fac=function(t){return new(t||i)(o.Y36(Z.B),o.Y36(C.n),o.Y36(T.q),o.Y36(D.IN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-diagnostico-formulario"]],inputs:{diagnosticosUsuario:"diagnosticosUsuario"},standalone:!0,features:[o.jDz],decls:41,vars:11,consts:[[1,"contenedor-principal"],[1,"titulo"],[1,"formulario"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[1,"contenido-formulario"],[1,"inputs","ion-no-padding"],["size","12"],[1,"input"],["lines","none",1,"select-input"],["id","padecimiento","name","padecimientoName","interface","popover","toggleIcon","chevron-up","expandedIcon","chevron-down","placeholder","Seleccionar","required","",3,"interfaceOptions","ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["noDiagnosticos",""],["lines","none",1,"date-input"],["datetime","fechaRealizacion"],["id","fechaRealizacionIcon","name","calendar","slot","end"],["trigger","fechaRealizacionIcon",3,"keepContentsMounted"],["id","doctor","name","doctorName","interface","popover","placeholder","Seleccionar","toggleIcon","chevron-up","expandedIcon","chevron-down","required","",3,"interfaceOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"botones","botones-column"],["type","submit",1,"dark",3,"disabled"],[3,"value"],["disabled",""],["presentation","date","color","morado-custom","name","fechaRealizacion","id","fechaRealizacion","showDefaultButtons","true","locale","es-ES",3,"ngModel","max","ngModelChange"],["fechaRealizacion","ngModel"]],template:function(t,a){if(1&t){const d=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"ion-text")(3,"h1"),o._uU(4,"A\xf1adir diagn\xf3stico"),o.qZA()()(),o.TgZ(5,"div",2)(6,"form",3,4),o.NdJ("keydown.enter",function(h){return h.preventDefault()})("ngSubmit",function(){o.CHM(d);const h=o.MAs(7);return o.KtG(a.enviarFormulario(h))}),o.TgZ(8,"div",5)(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"div",8)(13,"ion-label"),o._uU(14,"Tipo de diagnostico"),o.qZA(),o.TgZ(15,"ion-item",9)(16,"ion-select",10),o.NdJ("ngModelChange",function(h){return a.expedientePadecimientoDto.idPadecimiento=h}),o.YNc(17,A,2,1,"ng-container",11),o.YNc(18,F,2,0,"ng-template",null,12,o.W1O),o.qZA()()()()(),o.TgZ(20,"ion-row")(21,"ion-col",7)(22,"div",8)(23,"ion-label"),o._uU(24,"Fecha de diagn\xf3stico/procedimiento"),o.qZA(),o.TgZ(25,"ion-item",13),o._UZ(26,"ion-datetime-button",14)(27,"ion-icon",15),o.qZA(),o.TgZ(28,"ion-modal",16),o.YNc(29,I,2,2,"ng-template"),o.qZA()()()(),o.TgZ(30,"ion-row")(31,"ion-col",7)(32,"div",8)(33,"ion-label"),o._uU(34,"Doctor"),o.qZA(),o.TgZ(35,"ion-item",9)(36,"ion-select",17),o.NdJ("ngModelChange",function(h){return a.expedientePadecimientoDto.idUsuarioDoctor=h}),o.YNc(37,S,2,2,"ion-select-option",18),o.qZA()()()()()()(),o.TgZ(38,"div",19)(39,"ion-button",20),o._uU(40," Guardar "),o.qZA()()()()()}if(2&t){const d=o.MAs(7),g=o.MAs(19);o.xp6(16),o.Q6J("interfaceOptions",o.DdM(9,P))("ngModel",a.expedientePadecimientoDto.idPadecimiento),o.xp6(1),o.Q6J("ngIf",null==a.diagnosticoFiltradoList?null:a.diagnosticoFiltradoList.length)("ngIfElse",g),o.xp6(11),o.Q6J("keepContentsMounted",!0),o.xp6(8),o.Q6J("interfaceOptions",o.DdM(10,P))("ngModel",a.expedientePadecimientoDto.idUsuarioDoctor),o.xp6(1),o.Q6J("ngForOf",a.misDoctoresList),o.xp6(2),o.Q6J("disabled",a.btnSubmit||!d.valid)}},dependencies:[e.Pc,e.YG,e.wI,e.x4,e.Mj,e.jY,e.gu,e.Ie,e.Q$,e.Nd,e.t9,e.n0,e.yW,e.ki,e.QI,m.ez,m.sg,m.O5,u.u5,u._Y,u.JJ,u.JL,u.Q7,u.On,u.F],styles:[".contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{padding:32px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{height:15vh}"]}),l})();var y=s(6558),E=s(6039);function b(i,l){if(1&i){const n=o.EpF();o.TgZ(0,"div",14)(1,"ion-text")(2,"p"),o._uU(3,"Nada por aqu\xed. "),o._UZ(4,"br"),o._uU(5," A\xfan no hay diagnosticos registrados."),o.qZA()(),o.TgZ(6,"ion-button",15),o.NdJ("click",function(){o.CHM(n);const a=o.oxw();return o.KtG(a.AgregarDiagnostico())}),o._UZ(7,"ion-icon",16),o._uU(8," A\xf1adir diagnostico "),o.qZA()()}}function N(i,l){if(1&i){const n=o.EpF();o.TgZ(0,"ion-item",19)(1,"ion-label")(2,"h3"),o._uU(3),o.qZA(),o.TgZ(4,"p"),o._uU(5),o.ALo(6,"date"),o.qZA(),o.TgZ(7,"p"),o._uU(8),o.qZA()(),o.TgZ(9,"ion-button",20),o.NdJ("click",function(){const d=o.CHM(n).$implicit,g=o.oxw(2);return o.KtG(g.presentarAlertaEliminarDiagnostico(d))}),o._UZ(10,"ion-icon",21),o.qZA()()}if(2&i){const n=l.$implicit,t=o.oxw(2);o.xp6(3),o.Oqu(n.nombrePadecimiento),o.xp6(2),o.Oqu(o.xi3(6,6,n.fechaDiagnostico,"dd/MM/yyyy")),o.xp6(3),o.lnq("",n.tituloDoctor," ",n.nombreDoctor," ",n.apellidosDoctor,""),o.xp6(1),o.Q6J("disabled",t.eliminandoDiagnostico)}}function J(i,l){if(1&i&&(o.TgZ(0,"ion-list",17),o.YNc(1,N,11,9,"ion-item",18),o.qZA()),2&i){const n=o.oxw();o.xp6(1),o.Q6J("ngForOf",n.misDiagnosticos)}}let Y=(()=>{var i;class l{constructor(t,a,d,g,h){this.alertController=t,this.modalController=a,this.usuarioService=d,this.expedientePadecimientoService=g,this.loadingSpinner=h,this.eliminandoDiagnostico=!1,(0,f.a)({"chevron-left":"assets/img/svg/chevron-left.svg",plus:"assets/img/svg/plus.svg",trash:"assets/img/svg/trash-2.svg"})}ngOnInit(){this.consultarDiagnosticos()}consultarDiagnosticos(){this.loadingSpinner.presentLoading(),this.usuarioService.consultarDiagnosticosUsuario().subscribe({next:t=>{this.misDiagnosticos=t},error:()=>{this.loadingSpinner.dismissLoading()},complete:()=>{this.loadingSpinner.dismissLoading()}})}presentarAlertaEliminarDiagnostico(t){var a=this;return(0,p.Z)(function*(){yield(yield a.alertController.create({header:"\xbfSeguro que deseas eliminar este elemento?",subHeader:"No podr\xe1s recuperarlo",cssClass:"custom-alert color-error icon-trash two-buttons",buttons:[{text:"No, regresar",role:"cancel"},{text:"S\xed, eliminar",role:"confirm",handler:()=>{a.eliminarAntecedente(t)}}]})).present()})()}presentarAlertaEliminadoExitosamente(){var t=this;return(0,p.Z)(function*(){yield(yield t.alertController.create({header:"Elemento eliminado exitosamente",buttons:[{text:"De acuerdo",role:"confirm"}],cssClass:"custom-alert color-primary icon-check"})).present()})()}AgregarDiagnostico(){var t=this;return(0,p.Z)(function*(){const a=yield t.modalController.create({component:U,componentProps:{diagnosticosUsuario:t.misDiagnosticos},breakpoints:[0,1],initialBreakpoint:1,cssClass:"custom-sheet-modal"});a.onWillDismiss().then(()=>{t.consultarDiagnosticos()}),yield a.present()})()}eliminarAntecedente(t){this.eliminandoDiagnostico=!0,this.expedientePadecimientoService.eliminar(t.idExpedientePadecimiento).subscribe({next:()=>{this.consultarDiagnosticos()},error:()=>{this.eliminandoDiagnostico=!1},complete:()=>{this.eliminandoDiagnostico=!1,this.presentarAlertaEliminadoExitosamente()}})}listaDiagnosticosVacia(){var t;return(null===(t=this.misDiagnosticos)||void 0===t?void 0:t.length)<=0}}return(i=l).\u0275fac=function(t){return new(t||i)(o.Y36(D.Br),o.Y36(D.IN),o.Y36(y.i),o.Y36(C.n),o.Y36(E.o))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-info-diagnosticos"]],standalone:!0,features:[o.jDz],decls:20,vars:2,consts:[[1,"ion-no-border"],[1,"contenedor-header-light"],["slot","start",1,"start"],["routerLink","inicio-perfil"],["slot","start","name","chevron-left"],["slot","end",1,"end"],[1,"icon-only",3,"click"],["name","plus"],[1,"primary"],[1,"contenedor-principal"],[1,"titulo"],[1,"lista-diagnosticos"],["class","lista-vacia",4,"ngIf"],["class","custom-general-item-list",4,"ngIf"],[1,"lista-vacia"],["fill","outline",3,"click"],["slot","start","name","plus"],[1,"custom-general-item-list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",1,"custom-icon-only","clear-error","slot-end",3,"disabled","click"],["name","trash"]],template:function(t,a){1&t&&(o.TgZ(0,"ion-header",0)(1,"div",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),o._UZ(5,"ion-icon",4),o.TgZ(6,"ion-label"),o._uU(7,"Atr\xe1s"),o.qZA()()(),o.TgZ(8,"ion-buttons",5)(9,"ion-button",6),o.NdJ("click",function(){return a.AgregarDiagnostico()}),o._UZ(10,"ion-icon",7),o.qZA()()()()(),o.TgZ(11,"ion-content",8)(12,"div",9)(13,"div",10)(14,"ion-text")(15,"h3"),o._uU(16,"Diagnosticos"),o.qZA()()(),o.TgZ(17,"div",11),o.YNc(18,b,9,0,"div",12),o.YNc(19,J,2,1,"ion-list",13),o.qZA()()()),2&t&&(o.xp6(18),o.Q6J("ngIf",a.listaDiagnosticosVacia()),o.xp6(1),o.Q6J("ngIf",!a.listaDiagnosticosVacia()))},dependencies:[e.Pc,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.Ie,e.Q$,e.q_,e.yW,e.sr,e.YI,m.ez,m.sg,m.O5,m.uU,u.u5,c.Bz,c.rH],styles:[".contenedor-principal[_ngcontent-%COMP%]{background:var(--primary-50);height:80vh}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .lista-diagnosticos[_ngcontent-%COMP%]{height:72vh}"]}),l})()},6203:(x,_,s)=>{s.d(_,{n:()=>u});var p=s(1571),m=s(529);let u=(()=>{var c;class e{constructor(r){this.http=r,this.dataUrl="expedientePadecimiento/"}consultarPorUsuarioParaSelector(){return this.http.get(this.dataUrl+"consultarPorUsuarioSelector")}eliminar(r){return this.http.delete(this.dataUrl+`${r}`)}agregarPadecimiento(r){return this.http.post(this.dataUrl+"agregarExpedientePadecimiento",r)}}return(c=e).\u0275fac=function(r){return new(r||c)(p.LFG(m.eN))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),e})()},9134:(x,_,s)=>{s.d(_,{q:()=>u});var p=s(1571),m=s(529);let u=(()=>{var c;class e{constructor(r){this.http=r,this.url="expedienteDoctor/"}consultarExpediente(){return this.http.get(this.url)}consultarExpedienteConImagenes(){return this.http.get(this.url+"conImagenes")}consultarSelector(){return this.http.get(this.url+"selector")}consultarPorUsuarioParaSelector(){return this.http.get(this.url+"selectorPorUsuario")}eliminar(r){return this.http.delete(this.url+"eliminarDoctorTrackr",{body:r})}agregar(r){return this.http.post(this.url,r)}}return(c=e).\u0275fac=function(r){return new(r||c)(p.LFG(m.eN))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),e})()}}]);