"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3405],{3405:(_,u,o)=>{o.r(u),o.d(u,{FilePickerWeb:()=>m});var n=o(5861),d=o(7423);class m extends d.Uw{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}convertHeicToJpeg(e){var t=this;return(0,n.Z)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickFiles(e){var t=this;return(0,n.Z)(function*(){const s=yield t.openFilePicker(e);if(!s)throw new Error(t.ERROR_PICK_FILE_CANCELED);const r={files:[]};for(const i of s){const l={blob:i,modifiedAt:i.lastModified,mimeType:t.getMimeTypeFromUrl(i),name:t.getNameFromUrl(i),path:void 0,size:t.getSizeFromUrl(i)};null!=e&&e.readData&&(l.data=yield t.getDataFromFile(i)),r.files.push(l)}return r})()}pickImages(e){var t=this;return(0,n.Z)(function*(){return t.pickFiles(Object.assign({types:["image/*"]},e))})()}pickMedia(e){var t=this;return(0,n.Z)(function*(){return t.pickFiles(Object.assign({types:["image/*","video/*"]},e))})()}pickVideos(e){var t=this;return(0,n.Z)(function*(){return t.pickFiles(Object.assign({types:["video/*"]},e))})()}openFilePicker(e){var t=this;return(0,n.Z)(function*(){var s;const r=(null===(s=null==e?void 0:e.types)||void 0===s?void 0:s.join(","))||"",i=!(null==e||!e.multiple);return new Promise(l=>{let c=!1;const a=document.createElement("input");a.type="file",a.accept=r,a.multiple=i,a.addEventListener("change",()=>{c=!0;const p=Array.from(a.files||[]);l(p)},{once:!0}),window.addEventListener("focus",(0,n.Z)(function*(){yield t.wait(1e3),!c&&l(void 0)}),{once:!0}),a.click()})})()}getDataFromFile(e){return(0,n.Z)(function*(){return new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const c=("string"==typeof r.result?r.result:"").split("base64,")[1]||"";t(c)},r.onerror=i=>{s(i)}})})()}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}wait(e){return(0,n.Z)(function*(){return new Promise(t=>setTimeout(t,e))})()}}}}]);