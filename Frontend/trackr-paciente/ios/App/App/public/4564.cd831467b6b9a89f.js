"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4564],{4564:(A,_,a)=>{a.r(_),a.d(_,{InfoAntecedentesComponent:()=>Y});var p=a(5861),m=a(6895),u=a(433),n=a(12),h=a(2583),f=a(9808),c=a(429),v=a(7930),e=a(1571),Z=a(6958),x=a(6203),D=a(9134),C=a(1814);function T(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",22),e._uU(1),e.qZA()),2&i){const o=s.$implicit;e.Q6J("value",null==o?null:o.idPadecimiento),e.xp6(1),e.hij(" ",null==o?null:o.nombre," ")}}function O(i,s){if(1&i&&(e.ynx(0),e.YNc(1,T,2,2,"ion-select-option",19),e.BQk()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.antecedenteFiltradoList)}}function F(i,s){1&i&&(e.TgZ(0,"ion-select-option",23),e._uU(1,"No hay m\xe1s antecedentes"),e.qZA())}function I(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"ion-datetime",24,25),e.NdJ("ngModelChange",function(r){e.CHM(o);const l=e.oxw();return e.KtG(l.expedientePadecimientoDto.fechaDiagnostico=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("ngModel",o.expedientePadecimientoDto.fechaDiagnostico)("max",o.fechaActual)}}function S(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",22),e._uU(1),e.qZA()),2&i){const o=s.$implicit;e.Q6J("value",null==o?null:o.idUsuarioDoctor),e.xp6(1),e.hij(" ",null==o?null:o.nombre," ")}}const P=function(){return{cssClass:"custom-select-popover"}};let U=(()=>{var i;class s{constructor(t,r,l,d){this.entidadEstructuraService=t,this.expedientePadecimientoService=r,this.doctoresService=l,this.modalController=d,this.expedientePadecimientoDto=new v.D,this.btnSubmit=!1,this.fechaActual=(new Date).toISOString(),(0,h.a)({"chevron-up":"assets/img/svg/chevron-up.svg","chevron-down":"assets/img/svg/chevron-down.svg",calendar:"assets/img/svg/calendar.svg"})}ngOnInit(){this.consultarAntecedentesSelector(),this.consultarDoctores()}consultarAntecedentesSelector(){var t=this;return(0,p.Z)(function*(){return(0,f.n)(t.entidadEstructuraService.consultarAntecedentesParaSelector()).then(r=>{t.antecedenteFiltradoList=r.filter(l=>!t.antecedentesUsuario.some(d=>d.idPadecimiento===l.idPadecimiento))})})()}consultarDoctores(){this.doctoresService.consultarExpediente().subscribe({next:t=>{this.misDoctoresList=t},error:()=>{},complete:()=>{}})}enviarFormulario(t){this.btnSubmit=!0,null==this.expedientePadecimientoDto.fechaDiagnostico&&(this.expedientePadecimientoDto.fechaDiagnostico=new Date),t.valid?this.agregarExpedientePadecimiento(this.expedientePadecimientoDto):(0,c.CW)(t)}agregarExpedientePadecimiento(t){this.expedientePadecimientoService.agregarPadecimiento(t).subscribe({next:()=>{},error:()=>{},complete:()=>{this.modalController.dismiss()}})}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(Z.B),e.Y36(x.n),e.Y36(D.q),e.Y36(C.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-antecedente-formulario"]],inputs:{antecedentesUsuario:"antecedentesUsuario"},standalone:!0,features:[e.jDz],decls:41,vars:11,consts:[[1,"contenedor-principal"],[1,"titulo"],[1,"formulario"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[1,"contenido-formulario"],[1,"inputs","ion-no-padding"],["size","12"],[1,"input"],["lines","none",1,"select-input"],["id","padecimiento","name","padecimientoName","interface","popover","toggleIcon","chevron-up","expandedIcon","chevron-down","placeholder","Seleccionar","required","",3,"interfaceOptions","ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["noAntecedentes",""],["lines","none",1,"date-input"],["datetime","fechaRealizacion"],["id","fechaRealizacionIcon","name","calendar","slot","end"],["trigger","fechaRealizacionIcon",3,"keepContentsMounted"],[1,"12"],["id","doctor","name","doctorName","interface","popover","placeholder","Seleccionar","toggleIcon","chevron-up","expandedIcon","chevron-down","required","",3,"interfaceOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"botones","botones-column"],["type","submit",1,"dark",3,"disabled"],[3,"value"],["disabled",""],["presentation","date","color","morado-custom","name","fechaRealizacion","id","fechaRealizacion","showDefaultButtons","true","locale","es-ES",3,"ngModel","max","ngModelChange"],["fechaRealizacion","ngModel"]],template:function(t,r){if(1&t){const l=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"ion-text")(3,"h1"),e._uU(4,"A\xf1adir antecedente"),e.qZA()()(),e.TgZ(5,"div",2)(6,"form",3,4),e.NdJ("keydown.enter",function(g){return g.preventDefault()})("ngSubmit",function(){e.CHM(l);const g=e.MAs(7);return e.KtG(r.enviarFormulario(g))}),e.TgZ(8,"div",5)(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"div",8)(13,"ion-label"),e._uU(14,"Tipo de antecedente"),e.qZA(),e.TgZ(15,"ion-item",9)(16,"ion-select",10),e.NdJ("ngModelChange",function(g){return r.expedientePadecimientoDto.idPadecimiento=g}),e.YNc(17,O,2,1,"ng-container",11),e.YNc(18,F,2,0,"ng-template",null,12,e.W1O),e.qZA()()()()(),e.TgZ(20,"ion-row")(21,"ion-col",7)(22,"div",8)(23,"ion-label"),e._uU(24,"Fecha de diagn\xf3stico/procedimiento"),e.qZA(),e.TgZ(25,"ion-item",13),e._UZ(26,"ion-datetime-button",14)(27,"ion-icon",15),e.qZA(),e.TgZ(28,"ion-modal",16),e.YNc(29,I,2,2,"ng-template"),e.qZA()()()(),e.TgZ(30,"ion-row")(31,"ion-col",17)(32,"div",8)(33,"ion-label"),e._uU(34,"Doctor"),e.qZA(),e.TgZ(35,"ion-item",9)(36,"ion-select",18),e.NdJ("ngModelChange",function(g){return r.expedientePadecimientoDto.idUsuarioDoctor=g}),e.YNc(37,S,2,2,"ion-select-option",19),e.qZA()()()()()()(),e.TgZ(38,"div",20)(39,"ion-button",21),e._uU(40," Guardar "),e.qZA()()()()()}if(2&t){const l=e.MAs(7),d=e.MAs(19);e.xp6(16),e.Q6J("interfaceOptions",e.DdM(9,P))("ngModel",r.expedientePadecimientoDto.idPadecimiento),e.xp6(1),e.Q6J("ngIf",null==r.antecedenteFiltradoList?null:r.antecedenteFiltradoList.length)("ngIfElse",d),e.xp6(11),e.Q6J("keepContentsMounted",!0),e.xp6(8),e.Q6J("interfaceOptions",e.DdM(10,P))("ngModel",r.expedientePadecimientoDto.idUsuarioDoctor),e.xp6(1),e.Q6J("ngForOf",r.misDoctoresList),e.xp6(2),e.Q6J("disabled",r.btnSubmit||!l.valid)}},dependencies:[n.Pc,n.YG,n.wI,n.x4,n.Mj,n.jY,n.gu,n.Ie,n.Q$,n.Nd,n.t9,n.n0,n.yW,n.ki,n.QI,m.ez,m.sg,m.O5,u.u5,u._Y,u.JJ,u.JL,u.Q7,u.On,u.F],styles:[".contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{padding:32px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{height:15vh}"]}),s})();var M=a(4384),y=a(6558),E=a(6039);function b(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"div",14)(1,"ion-text")(2,"p"),e._uU(3,"Nada por aqu\xed. "),e._UZ(4,"br"),e._uU(5," A\xfan no hay antecedentes registrados."),e.qZA()(),e.TgZ(6,"ion-button",15),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.AgregarAntecedente())}),e._UZ(7,"ion-icon",16),e._uU(8," A\xf1adir antecedente "),e.qZA()()}}function N(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"ion-item",19)(1,"ion-label")(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-button",20),e.NdJ("click",function(){const l=e.CHM(o).$implicit,d=e.oxw(2);return e.KtG(d.presentarAlertaEliminarAntecedente(l))}),e._UZ(10,"ion-icon",21),e.qZA()()}if(2&i){const o=s.$implicit,t=e.oxw(2);e.xp6(3),e.Oqu(o.nombrePadecimiento),e.xp6(2),e.Oqu(e.xi3(6,6,o.fechaDiagnostico,"dd/MM/yyyy")),e.xp6(3),e.lnq("",o.tituloDoctor," ",o.nombreDoctor," ",o.apellidosDoctor,""),e.xp6(1),e.Q6J("disabled",t.eliminandoAntecedente)}}function J(i,s){if(1&i&&(e.TgZ(0,"ion-list",17),e.YNc(1,N,11,9,"ion-item",18),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.misAntecedentes)}}let Y=(()=>{var i;class s{constructor(t,r,l,d,g){this.alertController=t,this.modalController=r,this.usuarioService=l,this.expedientePadecimientoService=d,this.loadingSpinner=g,this.eliminandoAntecedente=!1,(0,h.a)({"chevron-left":"assets/img/svg/chevron-left.svg",plus:"assets/img/svg/plus.svg",trash:"assets/img/svg/trash-2.svg"})}ngOnInit(){this.consultarAntecedentes()}consultarAntecedentes(){this.loadingSpinner.presentLoading(),this.usuarioService.consultarAntecedentesUsuario().subscribe({next:t=>{this.misAntecedentes=t},error:()=>{this.loadingSpinner.dismissLoading()},complete:()=>{this.loadingSpinner.dismissLoading()}})}presentarAlertaEliminarAntecedente(t){var r=this;return(0,p.Z)(function*(){yield(yield r.alertController.create({header:"\xbfSeguro que deseas eliminar este elemento?",subHeader:"No podr\xe1s recuperarlo",cssClass:"custom-alert color-error icon-trash two-buttons",buttons:[{text:"No, regresar",role:"cancel"},{text:"S\xed, eliminar",role:"confirm",handler:()=>{r.eliminarAntecedente(t)}}]})).present()})()}presentarAlertaEliminadoExitosamente(){var t=this;return(0,p.Z)(function*(){yield(yield t.alertController.create({header:"Elemento eliminado exitosamente",buttons:[{text:"De acuerdo",role:"confirm"}],cssClass:"custom-alert color-primary icon-check"})).present()})()}AgregarAntecedente(){var t=this;return(0,p.Z)(function*(){const r=yield t.modalController.create({component:U,componentProps:{antecedentesUsuario:t.misAntecedentes},breakpoints:[0,1],initialBreakpoint:1,cssClass:"custom-sheet-modal"});r.onWillDismiss().then(()=>{t.consultarAntecedentes()}),yield r.present()})()}eliminarAntecedente(t){this.eliminandoAntecedente=!0,this.expedientePadecimientoService.eliminar(t.idExpedientePadecimiento).subscribe({next:()=>{this.consultarAntecedentes()},error:()=>{this.eliminandoAntecedente=!1},complete:()=>{this.eliminandoAntecedente=!1,this.presentarAlertaEliminadoExitosamente()}})}listaAntecedentesVacia(){var t;return(null===(t=this.misAntecedentes)||void 0===t?void 0:t.length)<=0}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(C.Br),e.Y36(n.IN),e.Y36(y.i),e.Y36(x.n),e.Y36(E.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-info-antecedentes"]],standalone:!0,features:[e.jDz],decls:20,vars:2,consts:[[1,"ion-no-border"],[1,"contenedor-header-light"],["slot","start",1,"start"],["routerLink","inicio-perfil"],["slot","start","name","chevron-left"],["slot","end",1,"end"],[1,"icon-only",3,"click"],["name","plus"],[1,"primary"],[1,"contenedor-principal"],[1,"titulo"],[1,"lista-antecedentes"],["class","lista-vacia",4,"ngIf"],["class","custom-general-item-list",4,"ngIf"],[1,"lista-vacia"],["fill","outline",3,"click"],["slot","start","name","plus"],[1,"custom-general-item-list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",1,"custom-icon-only","clear-error","slot-end",3,"disabled","click"],["name","trash"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header",0)(1,"div",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),e._UZ(5,"ion-icon",4),e.TgZ(6,"ion-label"),e._uU(7,"Atr\xe1s"),e.qZA()()(),e.TgZ(8,"ion-buttons",5)(9,"ion-button",6),e.NdJ("click",function(){return r.AgregarAntecedente()}),e._UZ(10,"ion-icon",7),e.qZA()()()()(),e.TgZ(11,"ion-content",8)(12,"div",9)(13,"div",10)(14,"ion-text")(15,"h3"),e._uU(16,"Antecedentes"),e.qZA()()(),e.TgZ(17,"div",11),e.YNc(18,b,9,0,"div",12),e.YNc(19,J,2,1,"ion-list",13),e.qZA()()()),2&t&&(e.xp6(18),e.Q6J("ngIf",r.listaAntecedentesVacia()),e.xp6(1),e.Q6J("ngIf",!r.listaAntecedentesVacia()))},dependencies:[n.Pc,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.yW,n.sr,n.YI,m.ez,m.sg,m.O5,m.uU,u.u5,M.Bz,M.rH],styles:[".contenedor-principal[_ngcontent-%COMP%]{background:var(--primary-50);height:80vh}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .lista-antecedentes[_ngcontent-%COMP%]{height:72vh}"]}),s})()},6203:(A,_,a)=>{a.d(_,{n:()=>u});var p=a(1571),m=a(529);let u=(()=>{var n;class h{constructor(c){this.http=c,this.dataUrl="expedientePadecimiento/"}consultarPorUsuarioParaSelector(){return this.http.get(this.dataUrl+"consultarPorUsuarioSelector")}eliminar(c){return this.http.delete(this.dataUrl+`${c}`)}agregarPadecimiento(c){return this.http.post(this.dataUrl+"agregarExpedientePadecimiento",c)}}return(n=h).\u0275fac=function(c){return new(c||n)(p.LFG(m.eN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),h})()},9134:(A,_,a)=>{a.d(_,{q:()=>u});var p=a(1571),m=a(529);let u=(()=>{var n;class h{constructor(c){this.http=c,this.url="expedienteDoctor/"}consultarExpediente(){return this.http.get(this.url)}consultarExpedienteConImagenes(){return this.http.get(this.url+"conImagenes")}consultarSelector(){return this.http.get(this.url+"selector")}consultarPorUsuarioParaSelector(){return this.http.get(this.url+"selectorPorUsuario")}eliminar(c){return this.http.delete(this.url+"eliminarDoctorTrackr",{body:c})}agregar(c){return this.http.post(this.url,c)}}return(n=h).\u0275fac=function(c){return new(c||n)(p.LFG(m.eN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),h})()}}]);