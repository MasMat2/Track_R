"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5902],{76:(T,h,l)=>{l.d(h,{GW:()=>u,dk:()=>d,oK:()=>g});var g=(()=>{return(i=g||(g={})).Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",g;var i})(),u=(()=>{return(i=u||(u={})).Rear="REAR",i.Front="FRONT",u;var i})(),d=(()=>{return(i=d||(d={})).Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",d;var i})()},6388:(T,h,l)=>{l.d(h,{V1:()=>d,dk:()=>u.dk,oK:()=>u.oK});var g=l(7423),u=l(76);const d=(0,g.fo)("Camera",{web:()=>l.e(3954).then(l.bind(l,3954)).then(i=>new i.CameraWeb)})},5902:(T,h,l)=>{l.r(h),l.d(h,{AgregarTratamientoPage:()=>ct});var g=l(5861),u=l(6895),d=l(433),i=l(12),v=l(2583),t=l(1571),s=l(281),P=l(9134),D=l(6203),x=l(6388);let S=(()=>{var o;class c{constructor(){}takePicture(){return(0,g.Z)(function*(){return yield x.V1.getPhoto({resultType:x.dk.Base64,source:x.oK.Camera,quality:100})})()}}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),c})();var y=l(1814);function q(o,c){1&o&&t._UZ(0,"ion-datetime",49)}function k(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," El f\xe1rmaco es requerido "),t.qZA())}function I(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," La cantidad es requerida "),t.qZA())}function E(o,c){if(1&o&&(t.TgZ(0,"ion-select-option",52),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e.nombre),t.xp6(1),t.hij(" ",e.nombre," ")}}function F(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," La unidad es requerida "),t.qZA())}function N(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," La indicaci\xf3n es requerida "),t.qZA())}function J(o,c){if(1&o&&(t.TgZ(0,"ion-select-option",52),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e.idPadecimiento),t.xp6(1),t.hij(" ",e.nombre," ")}}function Q(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," El padecimiento es requerido "),t.qZA())}function z(o,c){if(1&o&&(t.TgZ(0,"ion-select-option",52),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e.idUsuarioDoctor),t.xp6(1),t.hij(" ",e.nombre," ")}}function Y(o,c){1&o&&(t.TgZ(0,"div",50),t._UZ(1,"ion-icon",51),t._uU(2," El doctor es requerido "),t.qZA())}function j(o,c){1&o&&t._UZ(0,"ion-datetime",53)}function K(o,c){1&o&&t._UZ(0,"ion-datetime",55)}function R(o,c){1&o&&(t.TgZ(0,"ion-row")(1,"ion-col",13)(2,"div",14)(3,"ion-label"),t._uU(4,"Fecha de fin"),t.qZA(),t.TgZ(5,"ion-item",39),t._UZ(6,"ion-datetime-button",54)(7,"ion-icon",17),t.qZA(),t.TgZ(8,"ion-modal",18),t.YNc(9,K,1,0,"ng-template"),t.qZA()()()()),2&o&&(t.xp6(8),t.Q6J("keepContentsMounted",!0))}function G(o,c){1&o&&(t.TgZ(0,"ion-label"),t._uU(1," Fijar recordatorio "),t.qZA())}function H(o,c){1&o&&(t.TgZ(0,"ion-label"),t._uU(1," Editar recordatorio "),t.qZA())}const C=function(o){return{selected:o}};function B(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",71),t.NdJ("click",function(){const r=t.CHM(e).index,m=t.oxw(3);return t.KtG(m.seleccionarDiaRecordatorio(r))}),t._uU(1),t.qZA()}if(2&o){const e=c.$implicit,n=c.index,a=t.oxw(3);t.Q6J("ngClass",t.VKq(2,C,a.esDiaSemanaSeleccionado(n))),t.xp6(1),t.hij(" ",e.name," ")}}const $=function(){return{standalone:!0}};function L(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-datetime",72),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.fechaSeleccionada=a)}),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("ngModel",e.fechaSeleccionada)("ngModelOptions",t.DdM(2,$))}}function V(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addHour())}),t._UZ(1,"ion-icon",27),t.qZA()}}function W(o,c){if(1&o&&t._UZ(0,"ion-datetime",76),2&o){const e=t.oxw(),n=e.index,a=e.$implicit;t.s9C("formControlName",n),t.Q6J("value",null==a?null:a.value)("name","horaName"+n)("id","hora"+n)}}function X(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",77),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw(3);return t.KtG(r.removeHour(a))}),t._UZ(1,"ion-icon",78),t.qZA()}}function tt(o,c){if(1&o&&(t.TgZ(0,"ion-row")(1,"ion-col")(2,"div",14)(3,"ion-label"),t._uU(4),t.qZA(),t.TgZ(5,"ion-item",15),t._UZ(6,"ion-datetime-button",74)(7,"ion-icon",65),t.qZA(),t.TgZ(8,"ion-modal",18),t.YNc(9,W,1,4,"ng-template"),t.qZA()()(),t.TgZ(10,"ion-col",66)(11,"div",67),t.YNc(12,X,2,0,"ion-button",75),t.qZA()()()),2&o){const e=c.index;t.xp6(4),t.hij("Horario ",e+1,""),t.xp6(2),t.Q6J("datetime","hora"+e),t.xp6(2),t.Q6J("keepContentsMounted",!0),t.xp6(4),t.Q6J("ngIf",!0)}}function et(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header",56)(1,"ion-toolbar")(2,"ion-buttons",57)(3,"ion-button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setOpen(!1))}),t._UZ(4,"ion-icon",58),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Fijar recordatorio"),t.qZA()()(),t.TgZ(7,"ion-content",59)(8,"div",60)(9,"ion-grid",12)(10,"ion-row")(11,"ion-col",13)(12,"div",61),t.YNc(13,B,2,4,"ion-button",62),t.qZA()()(),t.TgZ(14,"div",63)(15,"ion-row")(16,"ion-col")(17,"div",14)(18,"ion-label"),t._uU(19,"Definir hora"),t.qZA(),t.TgZ(20,"ion-item",39),t._UZ(21,"ion-datetime-button",64)(22,"ion-icon",65),t.qZA(),t.TgZ(23,"ion-modal",18),t.YNc(24,L,1,3,"ng-template"),t.qZA()()(),t.TgZ(25,"ion-col",66)(26,"div",67),t.YNc(27,V,2,0,"ion-button",68),t.qZA()()(),t.TgZ(28,"ion-row")(29,"ion-col",13)(30,"ion-text")(31,"p"),t._uU(32,"Se notificar\xe1 15 minutos antes de la hora establecida."),t.qZA()()()()(),t.TgZ(33,"div",69),t.YNc(34,tt,13,4,"ion-row",70),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(13),t.Q6J("ngForOf",e.weekDays),t.xp6(10),t.Q6J("keepContentsMounted",!0),t.xp6(4),t.Q6J("ngIf",!0),t.xp6(7),t.Q6J("ngForOf",e.horas.controls)}}function nt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",79),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addPhotoToGallery())}),t.TgZ(1,"ion-label"),t._uU(2,"Adjuntar imagen"),t.qZA(),t._UZ(3,"ion-icon",80),t.qZA()}}function ot(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",81)(1,"div",82),t._UZ(2,"ion-img",83),t.TgZ(3,"div",84)(4,"ion-text")(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.eliminarAdjunto())}),t._UZ(8,"ion-icon",85),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("src","data:image/png;base64,"+(null==e.photo?null:e.photo.base64String)),t.xp6(4),t.Oqu(null==e.photo?null:e.photo.dataUrl)}}const O=function(){return{cssClass:"custom-select-action-sheet"}},it=function(o){return{activated:o}};function at(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"ion-text")(3,"h3"),t._uU(4,"A\xf1adir tratamiento"),t.qZA()()(),t.TgZ(5,"div",9)(6,"form",10)(7,"div",11)(8,"ion-grid",12)(9,"ion-row")(10,"ion-col",13)(11,"div",14)(12,"ion-label"),t._uU(13,"Fecha de registro"),t.qZA(),t.TgZ(14,"ion-item",15),t._UZ(15,"ion-datetime-button",16)(16,"ion-icon",17),t.qZA(),t.TgZ(17,"ion-modal",18),t.YNc(18,q,1,0,"ng-template"),t.qZA()()()(),t.TgZ(19,"ion-row")(20,"ion-col",13)(21,"div",14)(22,"ion-label"),t._uU(23,"F\xe1rmaco"),t.qZA(),t.TgZ(24,"ion-item",19),t._UZ(25,"ion-input",20),t.qZA(),t.YNc(26,k,3,0,"div",21),t.qZA()()(),t.TgZ(27,"ion-row")(28,"ion-col",22)(29,"div",14)(30,"ion-label"),t._uU(31,"Cantidad"),t.qZA(),t.TgZ(32,"ion-item",23)(33,"ion-button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.decrementarCantidad())}),t._UZ(34,"ion-icon",25),t.qZA(),t.TgZ(35,"ion-label"),t._uU(36),t.qZA(),t.TgZ(37,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.incrementarCantidad())}),t._UZ(38,"ion-icon",27),t.qZA()(),t.YNc(39,I,3,0,"div",21),t.qZA()(),t.TgZ(40,"ion-col",28)(41,"div",14)(42,"ion-label"),t._uU(43,"Unidad"),t.qZA(),t.TgZ(44,"ion-item",29)(45,"ion-select",30),t.YNc(46,E,2,2,"ion-select-option",31),t.qZA()(),t.YNc(47,F,3,0,"div",21),t.qZA()()(),t.TgZ(48,"ion-row")(49,"ion-col",13)(50,"div",14)(51,"ion-label"),t._uU(52,"Indicaciones"),t.qZA(),t.TgZ(53,"ion-item",32),t._UZ(54,"ion-textarea",33),t.qZA(),t.YNc(55,N,3,0,"div",21),t.qZA()()(),t.TgZ(56,"ion-row")(57,"ion-col",13)(58,"div",14)(59,"ion-label"),t._uU(60,"Padecimiento asociado"),t.qZA(),t.TgZ(61,"ion-item",29)(62,"ion-select",34),t.YNc(63,J,2,2,"ion-select-option",31),t.qZA()(),t.YNc(64,Q,3,0,"div",21),t.qZA()()(),t.TgZ(65,"ion-row")(66,"ion-col",13)(67,"div",14)(68,"ion-label"),t._uU(69,"Doctor"),t.qZA(),t.TgZ(70,"ion-item",29)(71,"ion-select",35),t.YNc(72,z,2,2,"ion-select-option",31),t.qZA()(),t.YNc(73,Y,3,0,"div",21),t.qZA()()(),t.TgZ(74,"ion-row")(75,"div",14)(76,"ion-label"),t._uU(77,"Duracion del tratamiento"),t.qZA()(),t.TgZ(78,"ion-col",36)(79,"ion-button",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.seleccionarTratamientoPermanente(!0))}),t._uU(80," Tratamiento permanente "),t.qZA()(),t.TgZ(81,"ion-col",36)(82,"ion-button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.seleccionarTratamientoPermanente(!1))}),t._uU(83," Tratamiento no permanente "),t.qZA()()(),t.TgZ(84,"ion-row")(85,"ion-col",13)(86,"div",14)(87,"ion-label"),t._uU(88,"Fecha de inicio"),t.qZA(),t.TgZ(89,"ion-item",39),t._UZ(90,"ion-datetime-button",40)(91,"ion-icon",17),t.qZA(),t.TgZ(92,"ion-modal",18),t.YNc(93,j,1,0,"ng-template"),t.qZA()()()(),t.YNc(94,R,10,1,"ion-row",41),t.TgZ(95,"ion-row")(96,"ion-col",13)(97,"ion-item",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.setOpen(!0))}),t.YNc(98,G,2,0,"ion-label",41),t.YNc(99,H,2,0,"ion-label",41),t._UZ(100,"ion-icon",43),t.qZA(),t.TgZ(101,"ion-modal",44),t.YNc(102,et,35,4,"ng-template"),t.qZA()()(),t.TgZ(103,"ion-row")(104,"ion-col",13),t.YNc(105,nt,4,0,"ion-item",45),t.YNc(106,ot,9,2,"div",46),t.qZA()()()(),t.TgZ(107,"div",47)(108,"ion-button",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.submitForm())}),t._uU(109,"Guardar"),t.qZA()()()()()}if(2&o){const e=t.oxw();let n,a,r,m,p,_,f,M,b,Z,A,w,U;t.xp6(6),t.Q6J("formGroup",e.formTratamiento),t.xp6(11),t.Q6J("keepContentsMounted",!0),t.xp6(9),t.Q6J("ngIf",(null==(n=e.formTratamiento.get("farmaco"))?null:n.hasError("required"))&&((null==(n=e.formTratamiento.get("farmaco"))?null:n.dirty)||(null==(n=e.formTratamiento.get("farmaco"))?null:n.touched))),t.xp6(10),t.Oqu(null==(a=e.formTratamiento.get("cantidad"))?null:a.value),t.xp6(3),t.Q6J("ngIf",(null==(r=e.formTratamiento.get("cantidad"))?null:r.hasError("required"))&&((null==(r=e.formTratamiento.get("cantidad"))?null:r.dirty)||(null==(r=e.formTratamiento.get("cantidad"))?null:r.touched))),t.xp6(6),t.Q6J("interfaceOptions",t.DdM(26,O)),t.xp6(1),t.Q6J("ngForOf",e.unidades),t.xp6(1),t.Q6J("ngIf",(null==(m=e.formTratamiento.get("unidad"))?null:m.hasError("required"))&&((null==(m=e.formTratamiento.get("unidad"))?null:m.dirty)||(null==(m=e.formTratamiento.get("unidad"))?null:m.touched))),t.xp6(8),t.Q6J("ngIf",(null==(p=e.formTratamiento.get("indicaciones"))?null:p.hasError("required"))&&((null==(p=e.formTratamiento.get("indicaciones"))?null:p.dirty)||(null==(p=e.formTratamiento.get("indicaciones"))?null:p.touched))),t.xp6(7),t.Q6J("interfaceOptions",t.DdM(27,O)),t.xp6(1),t.Q6J("ngForOf",e.padecimientosSelector),t.xp6(1),t.Q6J("ngIf",(null==(_=e.formTratamiento.get("idPadecimiento"))?null:_.hasError("required"))&&((null==(_=e.formTratamiento.get("idPadecimiento"))?null:_.dirty)||(null==(_=e.formTratamiento.get("idPadecimiento"))?null:_.touched))),t.xp6(7),t.Q6J("interfaceOptions",t.DdM(28,O)),t.xp6(1),t.Q6J("ngForOf",e.doctoresSelector),t.xp6(1),t.Q6J("ngIf",(null==(f=e.formTratamiento.get("idUsuarioDoctor"))?null:f.hasError("required"))&&((null==(f=e.formTratamiento.get("idUsuarioDoctor"))?null:f.dirty)||(null==(f=e.formTratamiento.get("idUsuarioDoctor"))?null:f.touched))),t.xp6(6),t.Q6J("ngClass",t.VKq(29,C,null==(M=e.formTratamiento.get("tratamientoPermanente"))?null:M.value)),t.xp6(3),t.Q6J("ngClass",t.VKq(31,C,!(null!=(b=e.formTratamiento.get("tratamientoPermanente"))&&b.value))),t.xp6(10),t.Q6J("keepContentsMounted",!0),t.xp6(2),t.Q6J("ngIf",!(null!=(Z=e.formTratamiento.get("tratamientoPermanente"))&&Z.value)),t.xp6(3),t.Q6J("ngClass",t.VKq(33,it,null==(A=e.formTratamiento.get("recordatorioActivo"))?null:A.value)),t.xp6(1),t.Q6J("ngIf",!(null!=(w=e.formTratamiento.get("recordatorioActivo"))&&w.value)),t.xp6(1),t.Q6J("ngIf",null==(U=e.formTratamiento.get("recordatorioActivo"))?null:U.value),t.xp6(2),t.Q6J("isOpen",e.isModalRecordatorioOpen),t.xp6(4),t.Q6J("ngIf",!e.photo),t.xp6(1),t.Q6J("ngIf",e.photo),t.xp6(2),t.Q6J("disabled",!e.formTratamiento.valid||e.btnSubmit)}}let ct=(()=>{var o;class c{constructor(n,a,r,m,p,_,f){this.perfilTratamientoService=n,this.doctoresService=a,this.expedientePadecimientoService=r,this.fb=m,this.photoService=p,this._modalCtrl=_,this.alertController=f,this.now=new Date,this.localOffset=6e4*this.now.getTimezoneOffset(),this.localISOTime=new Date(this.now.getTime()-this.localOffset).toISOString().slice(0,-1),this.dateToday=this.localISOTime,this.cantidadFarmaco=1,this.isModalRecordatorioOpen=!1,this.btnSubmit=!1,this.fechaSeleccionada=this.dateToday,this.weekDays=[{id:0,name:"L"},{id:1,name:"M"},{id:2,name:"M"},{id:3,name:"J"},{id:4,name:"V"},{id:5,name:"S"},{id:6,name:"D"}],this.unidades=[{id:1,nombre:"mcg"},{id:2,nombre:"mg"},{id:3,nombre:"g"},{id:4,nombre:"ml"},{id:5,nombre:"tabletas"},{id:6,nombre:"cucharadas"}],(0,v.a)({"chevron-left":"assets/img/svg/chevron-left.svg","chevron-right":"assets/img/svg/chevron-right.svg","chevron-up":"assets/img/svg/chevron-up.svg","chevron-down":"assets/img/svg/chevron-down.svg",calendar:"assets/img/svg/calendar.svg",clock:"assets/img/svg/clock-2.svg",info:"assets/img/svg/info.svg",camera:"assets/img/svg/camera.svg",minus:"assets/img/svg/minus.svg",plus:"assets/img/svg/plus.svg",x:"assets/img/svg/x.svg","trash-2":"assets/img/svg/trash-2.svg"})}ngOnInit(){this.formTratamiento=this.fb.group({fechaRegistro:[(new Date).toISOString(),d.kI.required],farmaco:["",d.kI.required],cantidad:["1",d.kI.required],unidad:["",d.kI.required],indicaciones:["",d.kI.required],idPadecimiento:["",d.kI.required],idUsuarioDoctor:["",d.kI.required],tratamientoPermanente:[!1],fechaInicio:[(new Date).toISOString(),d.kI.required],fechaFin:[(new Date).toISOString()],imagenBase64:[""],recordatorioActivo:[!1],diaSemana:this.fb.array([!1,!1,!1,!1,!1,!1,!1]),horas:this.fb.array([])},{validators:[this.validateDiaSemana(),this.compareDates()]}),this.selectorPadecimeintos(),this.selectorDoctor(),this.verificarAccionFormulario()}verificarAccionFormulario(){"editar"==this.accion&&this.rellenarValoresEditar()}rellenarValoresEditar(){this.formTratamiento.patchValue({fechaRegistro:this.perfilTratamientoDto.fechaRegistro,farmaco:this.perfilTratamientoDto.farmaco,cantidad:this.perfilTratamientoDto.cantidad,unidad:this.perfilTratamientoDto.unidad,indicaciones:this.perfilTratamientoDto.indicaciones,idPadecimiento:this.perfilTratamientoDto.idPadecimiento,idUsuarioDoctor:this.perfilTratamientoDto.idUsuarioDoctor,tratamientoPermanente:null==this.perfilTratamientoDto.fechaFin,fechaInicio:this.perfilTratamientoDto.fechaInicio,fechaFin:this.perfilTratamientoDto.fechaFin,imagenBase64:this.perfilTratamientoDto.imagenBase64,recordatorioActivo:this.perfilTratamientoDto.recordatorioActivo}),this.formTratamiento.get("diaSemana").patchValue(this.perfilTratamientoDto.diaSemana);const a=this.formTratamiento.get("horas");a.clear(),this.perfilTratamientoDto.horas.forEach(r=>{const m=this.formatearHoraAFechaLocal(r);a.push(new d.NI(m))}),""!=this.perfilTratamientoDto.imagenBase64&&(this.photo={format:"jpeg",saved:!1,base64String:this.perfilTratamientoDto.imagenBase64}),this.cantidadFarmaco=this.perfilTratamientoDto.cantidad}get horas(){return this.formTratamiento.get("horas")}formatearHoraAFechaLocal(n){const a=this.dateToday.split("T")[0];return new Date(new Date(`${a}T${n}`).getTime()-this.localOffset).toISOString().slice(0,-1)}selectorPadecimeintos(){this.expedientePadecimientoService.consultarPorUsuarioParaSelector().subscribe({next:n=>{console.log(n),this.padecimientosSelector=n}})}selectorDoctor(){this.doctoresService.consultarPorUsuarioParaSelector().subscribe({next:n=>{console.log(n),this.doctoresSelector=n}})}addPhotoToGallery(){var n=this;return(0,g.Z)(function*(){n.photo=yield n.photoService.takePicture()})()}removeHour(n){this.horas.removeAt(n),0===this.horas.length&&this.formTratamiento.patchValue({recordatorioActivo:!1})}addHour(){0===this.horas.length&&this.formTratamiento.patchValue({recordatorioActivo:!0}),this.horas.push(this.fb.control(this.fechaSeleccionada)),this.fechaSeleccionada=this.dateToday}compareDates(){return n=>{var a,r,m;const p=null===(a=n.get("tratamientoPermanente"))||void 0===a?void 0:a.value,_=new Date(null===(r=n.get("fechaInicio"))||void 0===r?void 0:r.value),f=new Date(null===(m=n.get("fechaFin"))||void 0===m?void 0:m.value);return!p&&_&&f&&_>f?{fechaFinLessThanFechaInicio:!0}:null}}validateDiaSemana(){return n=>{var a,r;const m=null===(a=n.get("recordatorioActivo"))||void 0===a?void 0:a.value,p=null===(r=n.get("diaSemana"))||void 0===r?void 0:r.value;return m&&!p.some(_=>_)?{sinDiaSelecionado:!0}:null}}submitForm(){var n,a;this.btnSubmit=!0;const r=this.formTratamiento.value,m=r.horas.map(_=>_.split("T")[1].split(".")[0]),p={idExpedienteTratamiento:null===(n=this.perfilTratamientoDto)||void 0===n?void 0:n.idExpedienteTratamiento,farmaco:r.farmaco,fechaRegistro:new Date(r.fechaRegistro),fechaInicio:new Date(r.fechaInicio),fechaFin:r.tratamientoPermanente?void 0:new Date(r.fechaFin),cantidad:r.cantidad,unidad:r.unidad,indicaciones:r.indicaciones,padecimiento:r.padecimiento,idPadecimiento:r.idPadecimiento,idUsuarioDoctor:r.idUsuarioDoctor,imagenBase64:(null===(a=this.photo)||void 0===a?void 0:a.base64String)||"",recordatorioActivo:r.recordatorioActivo,diaSemana:r.recordatorioActivo?r.diaSemana:null,horas:r.recordatorioActivo?m:null};this.perfilTratamientoDto=p,"editar"==this.accion?this.editar(this.perfilTratamientoDto):this.agregar(this.perfilTratamientoDto)}agregar(n){this.perfilTratamientoService.agregar(n).subscribe({next:()=>{},error:()=>{this.btnSubmit=!1},complete:()=>{this.btnSubmit=!1,this.presentarAlertaSuccess("agregado")}})}editar(n){this.perfilTratamientoService.editarTratamiento(n).subscribe({next:()=>{},error:()=>{this.btnSubmit=!1},complete:()=>{this.btnSubmit=!1,this.presentarAlertaSuccess("editado")}})}seleccionarTratamientoPermanente(n){this.formTratamiento.patchValue({tratamientoPermanente:n})}incrementarCantidad(){this.cantidadFarmaco<99&&(this.cantidadFarmaco+=1,this.formTratamiento.patchValue({cantidad:this.cantidadFarmaco}))}decrementarCantidad(){this.cantidadFarmaco>0&&(this.cantidadFarmaco-=1,this.formTratamiento.patchValue({cantidad:this.cantidadFarmaco}))}esDiaSemanaSeleccionado(n){return this.formTratamiento.get("diaSemana").at(n).value}seleccionarDiaRecordatorio(n){const r=this.formTratamiento.get("diaSemana").at(n);r.patchValue(!r.value)}eliminarAdjunto(){this.photo=void 0}presentarAlertaSuccess(n){var a=this;return(0,g.Z)(function*(){yield(yield a.alertController.create({header:`Tratamiento ${n} exitosamente`,buttons:[{text:"De acuerdo",role:"confirm",handler:()=>{a.cerrarModal("confirm")}}],cssClass:"custom-alert color-primary icon-check"})).present()})()}cerrarModal(n){this._modalCtrl.dismiss(null,n)}setOpen(n){this.isModalRecordatorioOpen=n}}return(o=c).\u0275fac=function(n){return new(n||o)(t.Y36(s.$),t.Y36(P.q),t.Y36(D.n),t.Y36(d.qu),t.Y36(S),t.Y36(y.IN),t.Y36(i.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregar-tratamiento"]],standalone:!0,features:[t.jDz],decls:10,vars:1,consts:[[1,"ion-no-border"],[1,"contenedor-header-light"],["slot","start",1,"start"],[3,"click"],["slot","start","name","chevron-left"],[1,"primary"],["class","contenedor-principal",4,"ngIf"],[1,"contenedor-principal"],[1,"titulo"],[1,"formulario"],[3,"formGroup"],[1,"contenido-formulario"],[1,"inputs","ion-no-padding"],["size","12"],[1,"input"],["lines","none",1,"date-input","input-disabled"],["disabled","true","datetime","fechaRealizacion"],["name","calendar","slot","end","aria-hidden","true"],[3,"keepContentsMounted"],["lines","none",1,"general-input"],["id","nombreEstudio","name","nombreEstudio","type","text","maxlength","200","required","","autocomplete","off","formControlName","farmaco"],["class","input-text-error",4,"ngIf"],["size","6",1,"padding-derecho"],["lines","none",1,"quantity-selector"],["id","decrementar",3,"click"],["slot","icon-only","name","minus"],["id","incrementar",3,"click"],["slot","icon-only","name","plus"],["size","6",1,"padding-izquierdo"],["lines","none",1,"select-input"],["id","unidad","name","unidadName","interface","action-sheet","cancelText","Cancelar","placeholder","Seleccionar","toggleIcon","chevron-down","formControlName","unidad",3,"interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],["lines","none",1,"textarea-input"],["maxlength","500","rows","8","autoGrow","","placeholder","Escriba aqu\xed indicaciones que le de su m\xe9dico de confianza.","formControlName","indicaciones"],["id","padecimiento","name","padecimientoName","interface","action-sheet","cancelText","Cancelar","placeholder","Seleccionar","toggleIcon","chevron-down","formControlName","idPadecimiento",3,"interfaceOptions"],["id","doctor","name","doctorName","interface","action-sheet","cancelText","Cancelar","placeholder","Seleccionar","toggleIcon","chevron-down","formControlName","idUsuarioDoctor",3,"interfaceOptions"],["size","6"],[1,"selection-button","padding-derecho",3,"ngClass","click"],[1,"selection-button","padding-izquierdo",3,"ngClass","click"],["lines","none",1,"date-input"],["datetime","fechaInicio"],[4,"ngIf"],["lines","none","button","",1,"action-button-item",3,"ngClass","click"],["slot","end","name","chevron-right"],[3,"isOpen"],["lines","none","button","","class","action-button-item",3,"click",4,"ngIf"],["class","adjuntar-elemento",4,"ngIf"],[1,"botones"],[1,"guardar",3,"disabled","click"],["presentation","date","color","morado-custom","name","fechaRealizacion","id","fechaRealizacion","showDefaultButtons","true","locale","es-ES","formControlName","fechaRegistro"],[1,"input-text-error"],["slot","start","name","info"],[3,"value"],["presentation","date","color","morado-custom","name","fechaInicio","id","fechaInicio","showDefaultButtons","true","cancelText","Cancelar","doneText","Ok","locale","es-ES","formControlName","fechaInicio"],["datetime","fechaFin"],["presentation","date","color","morado-custom","name","fechaFin","id","fechaFin","showDefaultButtons","true","cancelText","Cancelar","doneText","Ok","locale","es-ES","formControlName","fechaFin"],[1,"ion-no-border","header-modal"],["slot","start"],["name","x"],[1,"neutral"],[1,"contenedor-principal-modal"],[1,"selector-dias"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"selector-hora"],["datetime","selectorHora"],["name","clock","slot","end","aria-hidden","true"],["size","auto"],[1,"boton-agregar-eliminar"],["class","agregar",3,"click",4,"ngIf"],["formArrayName","horas",1,"horas-seleccionadas"],[4,"ngFor","ngForOf"],[3,"ngClass","click"],["presentation","time","color","morado-custom","name","selectorHoraName","id","selectorHora","showDefaultButtons","true","cancelText","Cancelar","doneText","Ok","locale","es-ES",3,"ngModel","ngModelOptions","ngModelChange"],[1,"agregar",3,"click"],["disabled","",3,"datetime"],["class","eliminar",3,"click",4,"ngIf"],["presentation","time","color","morado-custom","showDefaultButtons","true","locale","es-ES","readonly","",3,"value","name","id","formControlName"],[1,"eliminar",3,"click"],["slot","icon-only","name","x"],["lines","none","button","",1,"action-button-item",3,"click"],["slot","end","name","camera"],[1,"adjuntar-elemento"],[1,"previsualizacion"],[3,"src"],[1,"datos-archivo"],["slot","icon-only","name","trash-2"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header",0)(1,"div",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),t.NdJ("click",function(){return a.cerrarModal("cancel")}),t._UZ(5,"ion-icon",4),t.TgZ(6,"ion-label"),t._uU(7,"Atr\xe1s"),t.qZA()()()()()(),t.TgZ(8,"ion-content",5),t.YNc(9,at,110,35,"div",6),t.qZA()),2&n&&(t.xp6(9),t.Q6J("ngIf",!0))},dependencies:[i.Pc,i.YG,i.Sm,i.wI,i.W2,i.x4,i.Mj,i.jY,i.Gu,i.gu,i.Xz,i.pK,i.Ie,i.Q$,i.Nd,i.t9,i.n0,i.yW,i.g2,i.wd,i.sr,i.ki,i.QI,i.j9,u.ez,u.mk,u.sg,u.O5,d.u5,d._Y,d.JJ,d.JL,d.Q7,d.nD,d.On,d.UX,d.sg,d.u,d.CE],styles:[".contenedor-principal[_ngcontent-%COMP%]{background:var(--primary-50)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{background:var(--primary-50);height:15vh;width:100%;display:flex;flex-direction:column;justify-content:flex-end;padding:0 32px 36px}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   .guardar[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:16px;width:100%;max-width:600px;height:44px;--border-radius: 8px;color:var(--neutral-50);--background: var(--primary-700);--box-shadow: 0}.contenedor-principal[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   .guardar.button-disabled[_ngcontent-%COMP%]{opacity:1;--background: var(--primary-300)}.contenedor-principal[_ngcontent-%COMP%]   .selection-button[_ngcontent-%COMP%]{width:100%;height:70px;margin:12px 0 0;--border-width: 1px;--border-style: solid;--border-color: var(--primary-700);--border-radius: 8px;font-family:var(--font-body);font-size:16px;font-weight:400;text-wrap:wrap!important;color:var(--primary-700);--background: var(--primary-50);--box-shadow: 0}.contenedor-principal[_ngcontent-%COMP%]   .selection-button.selected[_ngcontent-%COMP%]{color:var(--neutral-50);--background: var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]{width:100%;margin-top:24px;--border-width: 1px;--border-color: var(--primary-400);--border-radius: 8px;--background: var(--primary-100)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:100%;font-family:var(--font-body);font-size:16px;font-weight:700;color:var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item.activated[_ngcontent-%COMP%]{--background: var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item.activated[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--neutral-50)}.contenedor-principal[_ngcontent-%COMP%]   ion-item.action-button-item.activated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--neutral-50)}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]{padding:32px 0 0;background:var(--primary-50);width:100%}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]{background:var(--primary-100);padding:16px 16px 20px;border-width:1px;border-color:var(--primary-200);border-style:solid;border-radius:8px;height:170px;display:flex;flex-direction:column;align-items:center}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]::part(image){width:calc(100vw - 96px);height:92px;border-radius:8px;object-fit:cover}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]{padding-top:8px;display:flex;justify-content:space-between;height:100%;width:100%;align-items:center}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{max-width:calc(100% - 56px);overflow:hidden}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:14px;color:var(--neutral-900);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:40px;width:40px;--border-radius: 4px;--border-style: solid;--border-width: 1px;--border-color: var(--error-200);--background: var(--error-100);--box-shadow: 0;margin:0}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px!important;color:var(--error-200)}.contenedor-principal[_ngcontent-%COMP%]   .adjuntar-elemento[_ngcontent-%COMP%]   .previsualizacion[_ngcontent-%COMP%]   .datos-archivo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0!important}ion-header.header-modal[_ngcontent-%COMP%]{--background: var(--neutral-50);border-bottom:1px solid var(--neutral-200)}ion-header.header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:52px 32px 0}ion-header.header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:18px;color:var(--neutral-800)}ion-header.header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0}ion-header.header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.contenedor-principal-modal[_ngcontent-%COMP%]{height:100%;background:var(--neutral-50)}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-dias[_ngcontent-%COMP%]{width:100%;padding-top:48px;display:flex;justify-content:space-between}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-dias[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:40px!important;max-width:40px!important;height:40px!important;--border-radius: 100%;max-height:40px!important;--background: transparent;--box-shadow: 0;color:var(--neutral-500);font-family:var(--font-body);font-size:20px}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-dias[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-dias[_ngcontent-%COMP%]   ion-button.selected[_ngcontent-%COMP%]{--background: var(--primary-700);color:var(--neutral-50)}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-hora[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%], .contenedor-principal-modal[_ngcontent-%COMP%]   .horas-seleccionadas[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-hora[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .contenedor-principal-modal[_ngcontent-%COMP%]   .horas-seleccionadas[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;color:var(--neutral-50);min-width:68px;height:50px;margin:0 0 0 16px;--box-shadow: 0}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-hora[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   .agregar[_ngcontent-%COMP%], .contenedor-principal-modal[_ngcontent-%COMP%]   .horas-seleccionadas[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   .agregar[_ngcontent-%COMP%]{--background: var(--primary-700)}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-hora[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   .eliminar[_ngcontent-%COMP%], .contenedor-principal-modal[_ngcontent-%COMP%]   .horas-seleccionadas[_ngcontent-%COMP%]   .boton-agregar-eliminar[_ngcontent-%COMP%]   .eliminar[_ngcontent-%COMP%]{--background: var(--error-200)}.contenedor-principal-modal[_ngcontent-%COMP%]   .selector-hora[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-family:var(--font-body);font-size:16px;color:var(--neutral-900)}.contenedor-principal-modal[_ngcontent-%COMP%]   .horas-seleccionadas[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid var(--neutral-200)}"]}),c})()},6203:(T,h,l)=>{l.d(h,{n:()=>d});var g=l(1571),u=l(529);let d=(()=>{var i;class v{constructor(s){this.http=s,this.dataUrl="expedientePadecimiento/"}consultarPorUsuarioParaSelector(){return this.http.get(this.dataUrl+"consultarPorUsuarioSelector")}eliminar(s){return this.http.delete(this.dataUrl+`${s}`)}agregarPadecimiento(s){return this.http.post(this.dataUrl+"agregarExpedientePadecimiento",s)}}return(i=v).\u0275fac=function(s){return new(s||i)(g.LFG(u.eN))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),v})()},9134:(T,h,l)=>{l.d(h,{q:()=>d});var g=l(1571),u=l(529);let d=(()=>{var i;class v{constructor(s){this.http=s,this.url="expedienteDoctor/"}consultarExpediente(){return this.http.get(this.url)}consultarExpedienteConImagenes(){return this.http.get(this.url+"conImagenes")}consultarSelector(){return this.http.get(this.url+"selector")}consultarPorUsuarioParaSelector(){return this.http.get(this.url+"selectorPorUsuario")}eliminar(s){return this.http.delete(this.url+"eliminarDoctorTrackr",{body:s})}agregar(s){return this.http.post(this.url,s)}}return(i=v).\u0275fac=function(s){return new(s||i)(g.LFG(u.eN))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),v})()},281:(T,h,l)=>{l.d(h,{$:()=>d});var g=l(1571),u=l(529);let d=(()=>{var i;class v{constructor(s){this.http=s,this.dataUrl="expedienteTratamiento/"}consultarTratamientos(){return this.http.get(this.dataUrl+"consultarTratamientosTrackr")}consultarTratamientoDetalle(s){return this.http.get(this.dataUrl+`consultarTratamientoDetalle/${s}`)}agregar(s){return this.http.post(this.dataUrl+"agregar",s)}editarTratamiento(s){return this.http.put(this.dataUrl+"editar",s)}eliminarTratamiento(s){return this.http.delete(this.dataUrl+`eliminar/${s}`)}}return(i=v).\u0275fac=function(s){return new(s||i)(g.LFG(u.eN))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),v})()}}]);