"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3221],{3221:(T,C,l)=>{l.r(C),l.d(C,{MisTratamientosPage:()=>Y});var p=l(5861),g=l(6895),h=l(4384),a=l(12),f=l(2583),_=l(277),P=l(433),O=l(7746),n=l(1571),M=l(1814),v=l(281);function b(i,s){if(1&i&&(n.TgZ(0,"ion-text",14)(1,"h3"),n._uU(2,"Fecha de fin"),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.ALo(5,"date"),n.qZA()()),2&i){const e=n.oxw();n.xp6(4),n.hij(" ",n.gM2(5,1,null==e.tratamiento?null:e.tratamiento.fechaFin,"MMMM d, y","","es-MX")," ")}}function Z(i,s){1&i&&n._UZ(0,"ion-icon",31)}function y(i,s){1&i&&n._UZ(0,"ion-icon",32)}function A(i,s){if(1&i){const e=n.EpF();n.TgZ(0,"div",28)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.cambiarFiltro())}),n.YNc(2,Z,1,0,"ion-icon",29),n.YNc(3,y,1,0,"ion-icon",30),n._uU(4),n.qZA()()}if(2&i){const e=n.oxw(2);n.xp6(2),n.Q6J("ngIf","ascendente"==e.ordenFiltro),n.xp6(1),n.Q6J("ngIf","descendente"==e.ordenFiltro),n.xp6(1),n.hij(" Orden ",e.ordenFiltro," ")}}function U(i,s){1&i&&(n.TgZ(0,"div",33)(1,"ion-text")(2,"p"),n._uU(3," Nada por aqu\xed. "),n._UZ(4,"br"),n._uU(5," A\xfan no tienes consumos registrados. "),n.qZA()()())}function D(i,s){if(1&i&&(n.TgZ(0,"ion-item")(1,"ion-label")(2,"h3"),n._uU(3),n.ALo(4,"date"),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.ALo(7,"date"),n.qZA()()()),2&i){const e=s.$implicit;n.xp6(3),n.Oqu(n.gM2(4,2,e,"MMMM d, y","","es-MX")),n.xp6(3),n.Oqu(n.xi3(7,7,e,"h:mm a"))}}function w(i,s){if(1&i&&(n.TgZ(0,"ion-list"),n.YNc(1,D,8,10,"ion-item",34),n.qZA()),2&i){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",null==e.tratamiento?null:e.tratamiento.bitacora)}}function I(i,s){if(1&i){const e=n.EpF();n.TgZ(0,"ion-header",20)(1,"div",21)(2,"ion-toolbar")(3,"ion-buttons",22)(4,"ion-button",4),n.NdJ("click",function(){n.CHM(e);const t=n.oxw();return n.KtG(t.setOpen(!1))}),n._UZ(5,"ion-icon",5),n._uU(6," Atr\xe1s "),n.qZA()()()()(),n.TgZ(7,"ion-content",0)(8,"div",23)(9,"div",10)(10,"ion-text")(11,"h3"),n._uU(12,"Bitacora de consumo"),n.qZA(),n.TgZ(13,"p"),n._uU(14),n.qZA()()(),n.YNc(15,A,5,3,"div",24),n.TgZ(16,"div",25),n.YNc(17,U,6,0,"div",26),n.YNc(18,w,2,1,"ion-list",27),n.qZA()()()}if(2&i){const e=n.oxw();n.xp6(14),n.Oqu(null==e.tratamiento?null:e.tratamiento.farmaco),n.xp6(1),n.Q6J("ngIf",!e.listaConsumoVacia()),n.xp6(2),n.Q6J("ngIf",e.listaConsumoVacia()),n.xp6(1),n.Q6J("ngIf",!e.listaConsumoVacia())}}const q=function(i){return{"background-image":i}};let k=(()=>{var i;class s{constructor(o,t){this.modalController=o,this.perfilTratamientoService=t,this.backgroundUrl="",this.textoRecordatorios="",this.isModalBitacoraOpen=!1,this.tratamientoFueEditado=!1,this.ordenFiltro="ascendente",this.listaConsumo=[],(0,f.a)({"chevron-left":"assets/img/svg/chevron-left.svg","chevron-right":"assets/img/svg/chevron-right.svg","external-link":"assets/img/svg/external-link.svg","pen-line":"assets/img/svg/pen-line.svg","arrow-up":"assets/img/svg/arrow-up.svg","arrow-down":"assets/img/svg/arrow-down.svg"})}ngOnInit(){this.ordenFiltro="ascendente",this.consultarDetalleTratamiento()}consultarDetalleTratamiento(){this.tratamiento$=this.perfilTratamientoService.consultarTratamientoDetalle(this.idExpedienteTratamiento),this.tratamiento$.subscribe({next:o=>{this.tratamiento=o,this.backgroundUrl=`url(data:${this.tratamiento.tipoMime};base64,${this.tratamiento.imagenBase64})`,this.textoRecordatorios=this.formatearTextoRecordatorios(this.tratamiento.diaSemana,this.tratamiento.horas)}})}cerrarModal(o){this.modalController.dismiss(null,this.tratamientoFueEditado?"confirm":o)}setOpen(o){this.isModalBitacoraOpen=o}abrirModalEditarTratamiento(){var o=this;return(0,p.Z)(function*(){const t=yield o.modalController.create({component:_.AgregarTratamientoPage,componentProps:{accion:"editar",perfilTratamientoDto:o.tratamiento}});yield t.present(),yield t.onWillDismiss().then(({role:c})=>{"confirm"==c&&(o.tratamientoFueEditado=!0,o.consultarDetalleTratamiento())})})()}abrirModalImagen(){var o=this;return(0,p.Z)(function*(){const t=yield o.modalController.create({component:O.F,cssClass:"image-only-modal",componentProps:{archivo:o.tratamiento.imagenBase64,archivoTipoMime:o.tratamiento.tipoMime}});""!=o.tratamiento.imagenBase64&&(yield t.present())})()}cambiarFiltro(){this.ordenFiltro="ascendente"===this.ordenFiltro?"descendente":"ascendente",this.ordenarlista(this.ordenFiltro)}listaConsumoVacia(){var o;return 0==(null===(o=this.tratamiento.bitacora)||void 0===o?void 0:o.length)}formatearTextoRecordatorios(o,t){if(0===t.length)return"Sin recordatorios";const r=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],c=t.map(m=>{const[u,x]=m.split(":").map(Number),B=u<12?"a.m.":"p.m.";return`${u%12||12}:${x.toString().padStart(2,"0")} ${B}`});let d="";for(let m=0;m<o.length;m++)o[m]&&(d+=r[m],m<r.length-1&&o.slice(m+1).includes(!0)?d+=", ":m===r.length-2&&o[o.length-1]&&(d+=" y "));return d+=` a las ${c.join(", ")}`,d}ordenarlista(o){var t,r;const c=null===(t=this.tratamiento.bitacora)||void 0===t?void 0:t.map(d=>new Date(d));if(0!=(null===(r=this.tratamiento.bitacora)||void 0===r?void 0:r.length)){if("ascendente"==o){const d=null==c?void 0:c.slice().sort((m,u)=>m.getTime()-u.getTime());this.tratamiento.bitacora=d}if("descendente"==o){const d=null==c?void 0:c.slice().sort((m,u)=>u.getTime()-m.getTime());this.tratamiento.bitacora=d}}}}return(i=s).\u0275fac=function(o){return new(o||i)(n.Y36(M.IN),n.Y36(v.$))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-detalle-tratamiento"]],inputs:{idExpedienteTratamiento:"idExpedienteTratamiento"},standalone:!0,features:[n.jDz],decls:57,vars:20,consts:[[1,"primary"],[1,"contenedor-header",3,"ngStyle"],[1,"contenedor-header-secundario"],["slot","start",1,"start"],[3,"click"],["slot","start","name","chevron-left"],["slot","end",1,"end"],[1,"icon-only",3,"click"],["name","external-link"],[1,"contenedor-principal"],[1,"titulo"],[1,"farmaco"],["slot","start","name","pen-line"],[1,"info"],[1,"parrafo"],["class","parrafo",4,"ngIf"],[1,"botones"],["lines","none","button","",1,"action-button-item",3,"click"],["slot","end","name","chevron-right"],[3,"isOpen"],[1,"ion-no-border"],[1,"contenedor-header-modal"],["slot","start"],[1,"contenedor-principal-modal"],["class","filtro",4,"ngIf"],[1,"lista"],["class","lista-vacia",4,"ngIf"],[4,"ngIf"],[1,"filtro"],["slot","start","name","arrow-up",4,"ngIf"],["slot","start","name","arrow-down",4,"ngIf"],["slot","start","name","arrow-up"],["slot","start","name","arrow-down"],[1,"lista-vacia"],[4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(n.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-toolbar")(4,"ion-buttons",3)(5,"ion-button",4),n.NdJ("click",function(){return t.cerrarModal("cancel")}),n._UZ(6,"ion-icon",5),n.TgZ(7,"ion-label"),n._uU(8,"Atr\xe1s"),n.qZA()()(),n.TgZ(9,"ion-buttons",6)(10,"ion-button",7),n.NdJ("click",function(){return t.abrirModalImagen()}),n._UZ(11,"ion-icon",8),n.qZA()()()()(),n.TgZ(12,"div",9)(13,"div",10)(14,"ion-text",11)(15,"h3"),n._uU(16),n.qZA(),n.TgZ(17,"p"),n._uU(18),n.qZA()(),n.TgZ(19,"ion-button",4),n.NdJ("click",function(){return t.abrirModalEditarTratamiento()}),n._UZ(20,"ion-icon",12),n._uU(21," Editar "),n.qZA()(),n.TgZ(22,"div",13)(23,"ion-text",14)(24,"h3"),n._uU(25,"Recordatorios"),n.qZA(),n.TgZ(26,"p"),n._uU(27),n.qZA()(),n.TgZ(28,"ion-text",14)(29,"h3"),n._uU(30,"Indicaciones"),n.qZA(),n.TgZ(31,"p"),n._uU(32),n.qZA()(),n.TgZ(33,"ion-text",14)(34,"h3"),n._uU(35,"Asociado a"),n.qZA(),n.TgZ(36,"p"),n._uU(37),n.qZA()(),n.TgZ(38,"ion-text",14)(39,"h3"),n._uU(40,"Doctor"),n.qZA(),n.TgZ(41,"p"),n._uU(42),n.qZA()(),n.TgZ(43,"ion-text",14)(44,"h3"),n._uU(45,"Fecha de inicio"),n.qZA(),n.TgZ(46,"p"),n._uU(47),n.ALo(48,"date"),n.qZA()(),n.YNc(49,b,6,6,"ion-text",15),n.qZA(),n.TgZ(50,"div",16)(51,"ion-item",17),n.NdJ("click",function(){return t.setOpen(!0)}),n.TgZ(52,"ion-label"),n._uU(53,"Ver bitacora de consumo"),n.qZA(),n._UZ(54,"ion-icon",18),n.qZA()()(),n.TgZ(55,"ion-modal",19),n.YNc(56,I,19,4,"ng-template"),n.qZA()()),2&o&&(n.xp6(1),n.Q6J("ngStyle",n.VKq(18,q,t.backgroundUrl)),n.xp6(15),n.Oqu(null==t.tratamiento?null:t.tratamiento.farmaco),n.xp6(2),n.AsE("",null==t.tratamiento?null:t.tratamiento.cantidad," ",null==t.tratamiento?null:t.tratamiento.unidad,""),n.xp6(9),n.hij(" ",t.textoRecordatorios," "),n.xp6(5),n.hij(" ",null==t.tratamiento?null:t.tratamiento.indicaciones," "),n.xp6(5),n.hij(" ",null==t.tratamiento?null:t.tratamiento.padecimiento," "),n.xp6(5),n.lnq(" ",null==t.tratamiento?null:t.tratamiento.tituloDoctor," ",null==t.tratamiento?null:t.tratamiento.nombreDoctor," ",null==t.tratamiento?null:t.tratamiento.apellidosDoctor," "),n.xp6(5),n.hij(" ",n.gM2(48,13,null==t.tratamiento?null:t.tratamiento.fechaInicio,"MMMM d, y","","es-MX")," "),n.xp6(2),n.Q6J("ngIf",null==t.tratamiento?null:t.tratamiento.fechaFin),n.xp6(6),n.Q6J("isOpen",t.isModalBitacoraOpen))},dependencies:[a.Pc,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.yW,a.sr,a.ki,g.ez,g.sg,g.O5,g.PC,g.uU,P.u5],styles:["ion-header[_ngcontent-%COMP%]{background:var(--primary-50)}ion-content[_ngcontent-%COMP%]{--background: var(--primary-50)}.contenedor-header[_ngcontent-%COMP%]{height:30vh;width:100%;border-radius:0 0 16px 16px;background-size:cover;background-position:top;background-repeat:no-repeat}.contenedor-header[_ngcontent-%COMP%]   .contenedor-header-secundario[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.1);border-radius:0 0 16px 16px}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-top:40px;--background: transparent}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{margin:0}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons.start[_ngcontent-%COMP%]{margin-left:32px}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons.end[_ngcontent-%COMP%]{margin-right:32px}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;color:var(--neutral-50);--border-radius: 8px !important}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:16px;margin:4px}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--neutral-50)}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0}.contenedor-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button.icon-only[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-left:2px!important;padding-right:2px!important}.contenedor-principal[_ngcontent-%COMP%]{height:70vh;background:url(header_light.508685377072668e.svg);background-size:contain;background-position:top;background-repeat:no-repeat;background-color:var(--primary-50)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:40px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   .farmaco[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-family:var(--font-display);font-size:24px;line-height:24px;color:var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   .farmaco[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--font-body);font-size:16px;color:var(--neutral-900)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;--background: transparent;--box-shadow: 0;border:0;--color: var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding-top:0}.contenedor-principal[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:0 32px}.contenedor-principal[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .parrafo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .contenedor-principal[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .parrafo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--font-body);font-size:16px;color:var(--neutral-500)}.contenedor-principal[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .parrafo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:24px}.contenedor-principal[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .parrafo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--neutral-900)}.contenedor-principal[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{width:100%;padding:32px 32px 60px}.contenedor-principal[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]{width:100%;--border-width: 1px;--border-color: var(--primary-400);--border-radius: 8px;--background: var(--primary-100)}.contenedor-principal[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:100%;font-family:var(--font-body);font-size:16px;font-weight:700;color:var(--primary-700)}.contenedor-principal[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   ion-item.action-button-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--primary-700)}.contenedor-header-modal[_ngcontent-%COMP%]{background:var(--primary-50);height:20vh;width:100%}.contenedor-header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{height:100%;width:100%;--background: url(/assets/header_light.svg);max-height:153px;max-width:390px;display:flex;flex-direction:column;justify-content:flex-end;padding-bottom:20px}.contenedor-header-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-family:var(--font-body);font-weight:400;font-size:18px;color:var(--primary-700)}.contenedor-principal-modal[_ngcontent-%COMP%]{height:80vh}.contenedor-principal-modal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal-modal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal-modal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal-modal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--neutral-900);font-family:var(--font-body);font-size:16px}.contenedor-principal-modal[_ngcontent-%COMP%]   .filtro[_ngcontent-%COMP%]{height:5vh;display:flex;flex-direction:row;width:100%;justify-content:flex-end;padding:0 32px}.contenedor-principal-modal[_ngcontent-%COMP%]   .filtro[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;--color: var(--primary-700);border:none;--box-shadow: none;font-family:var(--font-body);font-size:16px;font-weight:700}.contenedor-principal-modal[_ngcontent-%COMP%]   .filtro[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-700)}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]{height:67vh}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   .lista-vacia[_ngcontent-%COMP%]{padding-top:40%}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   .lista-vacia[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-family:var(--font-body);font-size:16px;color:var(--neutral-500)}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:0}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 0 0 2px 0;--border-color: var(--primary-50)}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:16px;color:var(--neutral-900)}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:14px;color:var(--neutral-600)}.contenedor-principal-modal[_ngcontent-%COMP%]   .lista[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){padding-left:32px}"]}),s})();var E=l(2384),F=l(6039);function N(i,s){if(1&i){const e=n.EpF();n.TgZ(0,"div",15)(1,"app-searchbar",16),n.NdJ("search",function(t){n.CHM(e);const r=n.oxw();return n.KtG(r.handleSearch(t))}),n.qZA()()}}function z(i,s){if(1&i){const e=n.EpF();n.TgZ(0,"div",17)(1,"ion-text")(2,"p"),n._uU(3,"Nada por aqu\xed. "),n._UZ(4,"br"),n._uU(5," A\xfan no tienes tratamientos registrados."),n.qZA()(),n.TgZ(6,"ion-button",18),n.NdJ("click",function(){n.CHM(e);const t=n.oxw();return n.KtG(t.agregarTratamiento())}),n._UZ(7,"ion-icon",19),n._uU(8," A\xf1adir tratamiento "),n.qZA()()}}function $(i,s){if(1&i&&n._UZ(0,"ion-img",26),2&i){const e=n.oxw().$implicit;n.Q6J("src","data:"+e.tipoMime+";base64,"+e.imagenBase64)}}function J(i,s){if(1&i){const e=n.EpF();n.TgZ(0,"ion-item-sliding")(1,"ion-item",21),n.NdJ("click",function(){const r=n.CHM(e).$implicit,c=n.oxw(2);return n.KtG(c.verDetalleTratamiento(r.idExpedienteTratamiento))}),n.TgZ(2,"ion-thumbnail",22),n.YNc(3,$,1,1,"ion-img",23),n.qZA(),n.TgZ(4,"ion-label")(5,"h3"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.TgZ(9,"p"),n._uU(10),n.qZA()()(),n.TgZ(11,"ion-item-options")(12,"ion-item-option",24),n.NdJ("click",function(){const r=n.CHM(e).$implicit,c=n.oxw(2);return n.KtG(c.presentarAlertaEliminar(r))}),n._UZ(13,"ion-icon",25),n.qZA()()()}if(2&i){const e=s.$implicit;n.xp6(3),n.Q6J("ngIf",e.imagenBase64),n.xp6(3),n.Oqu(e.farmaco),n.xp6(2),n.AsE("",e.cantidad," ",e.unidad,""),n.xp6(2),n.hij("Asociado a: ",e.padecimiento,"")}}function S(i,s){if(1&i&&(n.TgZ(0,"ion-list"),n.YNc(1,J,14,5,"ion-item-sliding",20),n.ALo(2,"async"),n.qZA()),2&i){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.filtrando?e.tratamientosFiltradosPorBusqueda:n.lcZ(2,1,e.tratamientos$))}}let Y=(()=>{var i;class s{constructor(o,t,r,c){this.perfilTratamientoService=o,this.alertController=t,this.modalController=r,this.loadingSpinner=c,this.filtrando=!1,(0,f.a)({plus:"assets/img/svg/plus.svg","trash-2":"assets/img/svg/trash-2.svg","chevron-left":"assets/img/svg/chevron-left.svg","chevron-right":"assets/img/svg/chevron-right.svg"})}ngOnInit(){this.consultarTratamientos()}consultarTratamientos(){this.loadingSpinner.presentLoading(),this.tratamientos$=this.perfilTratamientoService.consultarTratamientos(),this.tratamientos$.subscribe({next:o=>{this.misTratamientos=o},error:()=>{},complete:()=>{this.loadingSpinner.dismissLoading()}})}listaTratamientosVacia(){var o;return 0==(null===(o=this.misTratamientos)||void 0===o?void 0:o.length)}presentarAlertaEliminar(o){var t=this;return(0,p.Z)(function*(){yield(yield t.alertController.create({header:"\xbfSeguro que deseas eliminar este elemento?",subHeader:"No podr\xe1s recuperarlo",cssClass:"custom-alert color-error icon-trash two-buttons",buttons:[{text:"No, regresar",role:"cancel"},{text:"S\xed, eliminar",role:"confirm",handler:()=>{t.eliminarTratamiento(o)}}]})).present()})()}presentarAlertaEliminadoExitosamente(){var o=this;return(0,p.Z)(function*(){yield(yield o.alertController.create({header:"Elemento eliminado exitosamente",buttons:[{text:"De acuerdo",role:"confirm"}],cssClass:"custom-alert color-primary icon-check"})).present()})()}eliminarTratamiento(o){this.perfilTratamientoService.eliminarTratamiento(o.idExpedienteTratamiento).subscribe({next:()=>{this.consultarTratamientos()},error:()=>{},complete:()=>{this.presentarAlertaEliminadoExitosamente()}})}agregarTratamiento(){var o=this;return(0,p.Z)(function*(){const t=yield o.modalController.create({component:_.AgregarTratamientoPage,componentProps:{accion:"agregar"}});yield t.present(),yield t.onWillDismiss().then(({role:c})=>{"confirm"==c&&o.consultarTratamientos()})})()}verDetalleTratamiento(o){var t=this;return(0,p.Z)(function*(){const r=yield t.modalController.create({component:k,componentProps:{idExpedienteTratamiento:o}});yield r.present(),yield r.onWillDismiss().then(({role:d})=>{"confirm"==d&&t.consultarTratamientos()})})()}handleSearch(o){""!=o?(this.filtrando=!0,this.tratamientosFiltradosPorBusqueda=this.misTratamientos.filter(t=>{var r,c,d;const m=null===(r=t.farmaco)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()),u=null===(c=t.unidad)||void 0===c?void 0:c.toLowerCase().includes(o.toLowerCase()),x=null===(d=t.padecimiento)||void 0===d?void 0:d.toLowerCase().includes(o.toLowerCase());return m||u||x})):this.filtrando=!1}}return(i=s).\u0275fac=function(o){return new(o||i)(n.Y36(v.$),n.Y36(M.Br),n.Y36(a.IN),n.Y36(F.o))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-mis-tratamientos"]],standalone:!0,features:[n.jDz],decls:21,vars:3,consts:[[1,"ion-no-border"],[1,"contenedor-header-light"],["slot","start",1,"start"],["routerLink","inicio-perfil"],["slot","start","name","chevron-left"],["slot","end",1,"end"],[1,"icon-only",3,"click"],["name","plus"],[1,"primary"],[1,"contenedor-principal"],[1,"titulo"],["class","contenedor-barra-busqueda",4,"ngIf"],[1,"lista-tratamientos"],["class","lista-vacia",4,"ngIf"],[4,"ngIf"],[1,"contenedor-barra-busqueda"],[3,"search"],[1,"lista-vacia"],["fill","outline",3,"click"],["slot","start","name","plus"],[4,"ngFor","ngForOf"],["lines","none","detail","true","detailIcon","chevron-right","button","",3,"click"],["slot","start"],["alt","img",3,"src",4,"ngIf"],["expandable","",3,"click"],["slot","icon-only","name","trash-2"],["alt","img",3,"src"]],template:function(o,t){1&o&&(n.TgZ(0,"ion-header",0)(1,"div",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),n._UZ(5,"ion-icon",4),n.TgZ(6,"ion-label"),n._uU(7,"Atr\xe1s"),n.qZA()()(),n.TgZ(8,"ion-buttons",5)(9,"ion-button",6),n.NdJ("click",function(){return t.agregarTratamiento()}),n._UZ(10,"ion-icon",7),n.qZA()()()()(),n.TgZ(11,"ion-content",8)(12,"div",9)(13,"div",10)(14,"ion-text")(15,"h3"),n._uU(16,"Mis tratamientos"),n.qZA()()(),n.YNc(17,N,2,0,"div",11),n.TgZ(18,"div",12),n.YNc(19,z,9,0,"div",13),n.YNc(20,S,3,3,"ion-list",14),n.qZA()()()),2&o&&(n.xp6(17),n.Q6J("ngIf",!t.listaTratamientosVacia()),n.xp6(2),n.Q6J("ngIf",t.listaTratamientosVacia()),n.xp6(1),n.Q6J("ngIf",!t.listaTratamientosVacia()))},dependencies:[a.Pc,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.Xz,a.Ie,a.u8,a.IK,a.td,a.Q$,a.q_,a.yW,a.Bs,a.sr,a.YI,g.ez,g.sg,g.O5,g.Ov,h.Bz,h.rH,E.U],styles:[".contenedor-principal[_ngcontent-%COMP%]{height:80vh;background:var(--primary-50)}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{height:8vh;padding:16px 32px 0}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{text-align:start}.contenedor-principal[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-700);font-family:var(--font-display);font-size:24px;font-weight:700;line-height:32px}.contenedor-principal[_ngcontent-%COMP%]   .contenedor-barra-busqueda[_ngcontent-%COMP%]{padding:0 32px 24px}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]{height:62vh}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:0}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 0 0 2px 0;--border-color: var(--primary-50);--detail-icon-opacity: 1;--detail-icon-color: var(--neutral-900);--inner-padding-end: 32px}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{border:1px solid var(--neutral-100);--size: 72px;--border-radius: 8px}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:16px;color:var(--neutral-900)}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:14px;color:var(--neutral-600)}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){padding-left:32px}.contenedor-principal[_ngcontent-%COMP%]   .lista-tratamientos[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{background:var(--error-200);color:var(--neutral-50)}"]}),s})()},2384:(T,C,l)=>{l.d(C,{U:()=>f});var p=l(6895),g=l(1571),h=l(12),a=l(2583);let f=(()=>{var _;class P{constructor(){this.search=new g.vpe,(0,a.a)({"arrow-left":"assets/img/svg/arrow-left.svg",x:"assets/img/svg/x.svg",search:"assets/img/svg/search.svg"})}ngOnInit(){}onSearch(n){this.search.emit(n.target.value.trim())}}return(_=P).\u0275fac=function(n){return new(n||_)},_.\u0275cmp=g.Xpm({type:_,selectors:[["app-searchbar"]],outputs:{search:"search"},standalone:!0,features:[g.jDz],decls:2,vars:0,consts:[[1,"barra-busqueda"],["searchIcon","search","cancelButtonIcon","arrow-left","clearIcon","x","placeholder","Buscar",3,"ionInput"]],template:function(n,M){1&n&&(g.TgZ(0,"div",0)(1,"ion-searchbar",1),g.NdJ("ionInput",function(b){return M.onSearch(b)}),g.qZA()())},dependencies:[h.Pc,h.VI,h.j9,p.ez]}),P})()}}]);