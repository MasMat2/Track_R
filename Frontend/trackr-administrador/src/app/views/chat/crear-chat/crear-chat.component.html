<app-modal-base titulo="Crear Chat">
  <ng-template #modalBody>
    <div class="row">
      <div class="col-md-12">
        <label class="label-input required-label" style="color: gray;" >A quién se enviará el mensaje</label>
      </div>

      <div class="col-md-3">
        <div class="form-check">
          <input type="radio"
                 class="form-check-input"
                 name="destinatario"
                 id="todos"
                 value="1"
                 [(ngModel)]="tipo">
          <label for="todos" class="form-check-label">Todos</label>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-check">
          <input type="radio"
                 class="form-check-input"
                 name="destinatario"
                 id="padecimiento"
                 value="2"
                 [(ngModel)]="tipo">
          <label for="padecimiento" class="form-check-label">Pacientes por padecimiento</label>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-check">
          <input type="radio"
                 class="form-check-input"
                 name="destinatario"
                 id="pacientes"
                 value="3"
                 [(ngModel)]="tipo">
          <label for="pacientes" class="form-check-label">Pacientes</label>
        </div>
      </div>

      <div class="col-md-3">
        <ng-select
          name="padecimientoSelect"
          [items]="padecimientos"
          bindLabel="nombre"
          bindValue="idPadecimiento"
          [(ngModel)]="padecimiento"
          *ngIf="tipo == 2"
          (change)="obtenerIdPacientesPadecimiento()">
        </ng-select>

        <ng-select
          name="padecimientoSelect"
          [items]="expedientes"
          [multiple]="true"
          bindLabel="nombreCompleto"
          bindValue="idExpedienteTrackr"
          [(ngModel)]="personas"
          *ngIf="tipo == 3">
        </ng-select>
      </div>

      <div class="col-md-3">
        <div class="form-group">
          <label class="label-input required-label" style="color: gray;" >Titulo de chat</label>
          <input #descripcion="ngModel" type="text" name="titulo" [(ngModel)]="tituloChat" class="form-control" [disabled]="desabilitarTitulo()">
          <div *ngIf="(descripcion.errors?.['required'] && descripcion.touched )" class="error">
            El titulo es requerido
        </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-group">
          <button (click)="crearChat()" class="btn-agregar" [disabled]="deshabilitarBtn()">Crear Chat</button>
        </div>
      </div>
      
    </div>
  </ng-template>
</app-modal-base>