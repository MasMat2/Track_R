<div class="control-section" id="reswrapper">
  <div
    class="contenedor"
    [ngStyle]="{ 'margin-right': mostrarSidebar ? '25%' : '0' }"
  >
    <div class="titulo-contenedor">
      <div>Pacientes</div>
    </div>
    <h3 class="filter-text">Filtros de Búsqueda de pacientes</h3>
    <div class="d-flex justify-content-end" style="margin-right: 20px">
      <div class="d-flex">
        <input
          type="text"
          class="form-control"
          style="width: 600px"
          placeholder="Buscar"
          aria-label="Buscar"
        />
        <button class="btn-buscar" type="button">
          <img
            class="filter-primario"
            src="assets/img/svg/ico-18x18-buscar.svg"
          />
        </button>
        <div class="col-md-1"></div>
        <div class="d-flex align-items-center" style="color: gray">
          <button class="btn" type="button">
            <img
              class="filter-gray"
              src="assets/img/svg/ico-18x18-Filtros.svg"
            />
          </button>
          <span>Filtros</span>
        </div>
      </div>
    </div>
    <div
      class="d-flex align-items-center justify-content-between"
      style="margin-left: 10px"
    >
      <div class="contenedor-agregar justify-content-start" (click)="agregar()">
        <i class="fas fa-plus-circle"></i><span>Agregar</span>
      </div>
      <div class="justify-content-end">
        <div style="text-align: right">
          <button type="button" class="btn" (click)="isVistaCuadricula = true">
            <img
              src="assets/img/svg/ico-18x18-Grid-Bloques.svg"
              [ngClass]="isVistaCuadricula ? 'filter-primario' : null"
            />
          </button>
          <button
            type="button"
            class="btn"
            (click)="isVistaCuadricula = false"
            title="Vista de Lista"
          >
            <img
              src="assets/img/svg/ico-18x18-Grid-Lista.svg"
              [ngClass]="!isVistaCuadricula ? 'filter-primario' : null"
            />
          </button>
        </div>
      </div>
    </div>
    <div class="row">
      <hr class="col-md-12" />
    </div>
    <div class="row">
      <div class="col-12">
        <ng-container *ngIf="isVistaCuadricula; else vistaLista">
          <app-paciente-vista-cuadricula
            [pacientes]="pacientes"
            (event)="onGridClick($event)"
          >
          </app-paciente-vista-cuadricula>
        </ng-container>
        <ng-template #vistaLista>
          <app-grid-general
            [headerName]="HEADER_GRID"
            [data]="pacientes"
            [children]="columns"
            (event)="onGridClick($event)"
          >
          </app-grid-general>
        </ng-template>
      </div>
    </div>
  </div>
  <mat-sidenav #sidenav mode="side" [opened]="mostrarSidebar" position="end">
    <div class="d-flex justify-content-end">
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="toggleSidebar()"
      >
        <i class="far fa-times-circle"></i>
      </button>
    </div>
    <div *ngIf="paciente" class="card-body">
      <div class="bg-white d-flex">
        <div class="img-container mt-3">
          <img
            [src]="
              paciente.imagenBase64 != undefined || null
                ? (paciente.imagenBase64 | urlImagen : paciente?.tipoMime)
                : 'assets/img/default-user.jpg'
            "
            class="card-img-top img-fluid rounded"
          />
        </div>
        <div class="col-9 bg-white mt-3 d-flex flex-column align-items-start">
          <div style="font-weight: 550; font-size: medium; margin-left: 10px">
            Paciente
          </div>
          <div
            style="
              font-weight: bolder;
              font-size: larger;
              margin-top: 10px;
              margin-left: 10px;
            "
          >
            {{ paciente.nombreCompleto }}
          </div>
        </div>
      </div>
      <div class="text-container">
        <div class="datos">
          <div class="font-weight-normal mt-3" *ngIf="paciente.idGenero === 1">
            Hombre
          </div>
          <div class="font-weight-normal mt-3" *ngIf="paciente.idGenero === 2">
            Mujer
          </div>
          <div class="font-weight-bold mt-2" style="font-size: 1.5rem">
            {{ paciente.edad + " años" }}
          </div>
          <div class="font-weight-light mt-2" style="font-size: 0.6rem">
            <span *ngIf="paciente.colonia">{{ paciente.colonia }}, </span>
            <span *ngIf="paciente.ciudad">{{ paciente.ciudad }}, </span>
            <span *ngIf="paciente.estado">{{ paciente.estado }}</span>
          </div>
        </div>
      </div>
      <div
        class="padecimientos row mt-3 bg-white"
        *ngIf="paciente.padecimientos && paciente.padecimientos.length > 0"
      >
        <div class="col">
          <label
            class="mt-4 font-weight-bold"
            style="
              font-weight: 900;
              font-size: 1.125rem;
              color: gray;
              margin-left: 15px;
            "
          >
            Padecimientos
          </label>
          <ul>
            <li *ngFor="let padecimiento of paciente.padecimientos">
              <div>
                <label
                  >{{ padecimiento.nombre }} -- Desde
                  {{ padecimiento.fechaDiagnostico | date : "yyyy" }}</label
                >
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </mat-sidenav>
</div>
