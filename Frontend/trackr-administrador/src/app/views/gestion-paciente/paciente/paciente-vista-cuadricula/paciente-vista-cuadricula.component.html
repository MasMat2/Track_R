<!-- Botón Descargar Excel -->
<p-table
  class="primeng-table grid-cuadricula"
  [value]="pacientes"
  dataKey="idProyectoElementoTecnica"
  *ngIf="pacientes"
  [autoLayout]="true"
>
  <ng-template pTemplate="header">
    <tr class="ptable-header" >
      <th></th>
      <th >Nombre</th>
      <th >Edad</th>
      <th >Patalogías</th>
      <th >Dosis sin tomar</th>
      <th>Variables fuera de rango</th>
      
      <th>
        <div class="d-flex justify-content-end">
          <button type="button" class="btn" (click)="descargarExcel()">
            <i title="Descargar Excel" class="grid-download">
              <img src="assets/img/svg/ico-15x15-Descargar.svg" />
            </i>
          </button>
        </div>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-paciente>
    <tr>
      <td class="img-container p-0">
        <img
          [src]="
            paciente.imagenBase64 != undefined
              ? (paciente.imagenBase64)
              : 'assets/img/default-user.jpg'
          "
        />
      </td>
      <td style="">
        <div ></div>
        {{ paciente.nombreCompleto }}
      </td>
      <td style="">
       {{ paciente.edad }}
      </td>

      <td>
        <div class="d-flex">
          <span
            *ngFor="let patologia of paciente.patologias"
            style="background-color: white"
            class="m-1 p-1"
          >
            {{ patologia }}
          </span>
        </div>
      </td>
      <!-- TODO: Arreglar las bolitas de colores que muestran los signos -->
      <td style="">
        <div ></div>
        <div class="d-flex justify-content-center align-items-center">{{ paciente.dosisNoTomadas }}</div>
      </td>
      <td style="">
        <div ></div>
        <div class="d-flex justify-content-center align-items-center">{{ paciente.variablesFueraRango}}</div>
      </td>
      <td class="botones-acciones text-center px-0">
        <button
          type="button"
          class="btn"
          (click)="onVer(paciente)"
          title="Ver"
        >
        <img src="assets/img/svg/eye.svg" class="icon">
        </button>
        <button
          type="button"
          class="btn"
          (click)="onEditar(paciente)"
          title="Editar"
        >
          <img src="assets/img/svg/pen-line.svg" class="icon">
        </button>

        <button
          type="button"
          class="btn"
          (click)="onEliminar(paciente)"
          title="Eliminar"
        >
        <img src="assets/img/svg/trash-2.svg" class="icon">
        </button>
      </td>

    </tr>
  </ng-template>
</p-table>
