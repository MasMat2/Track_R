<app-modal-base [titulo]="titulo">
  <ng-template #modalBody>
    <div class="row">
      <div class="col-md-6" style="min-height: 30vh; height: 55vh;" *ngIf="!esAsistente; else fullWidthColumn" >
        <h2 class="text-center"> Mis asistentes </h2>
        <p-table
          class="primeng-table grid-cuadricula"
          [value]="misAsistentesArray"
          dataKey="idAsistenteDoctor"
          [autoLayout]="true"
          *ngIf="misAsistentesArray"
        >
          <ng-template pTemplate="header">
            <tr>
              <th class="text-center">Imagen</th>
              <th class="text-center">Nombre del Asistente</th>
            </tr>
          </ng-template>
  
          <ng-template pTemplate="body" let-doctor>
            <tr>
              <td class="img-container p-0">
                <img
                [src]="
                  doctor.imagenBase64 != undefined
                    ? (doctor.imagenBase64)
                    : 'assets/img/default-user.jpg'
                "
              />
              </td>
  
              <td class="asistente-cell">
                <span class="asistente-name">{{ doctor.nombreAsistente }}</span>
                <button class="btn" *ngIf="!esAsistente" (click)="eliminarAsistente(doctor)">
                  <i class="fa-solid fa-circle-minus"></i>
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <ng-template #fullWidthColumn>
        <div class="col-md-12" style="min-height: 30vh;">
          <h2 class="text-center"> Mis doctores </h2>
          <p-table
            class="primeng-table grid-cuadricula"
            [value]="misAsistentesArray"
            dataKey="idAsistenteDoctor"
            [autoLayout]="true"
            *ngIf="misAsistentesArray"
          >
            <ng-template pTemplate="header">
              <tr>
                <th class="text-center">Imagen</th>
                <th class="text-center">Nombre</th>
              </tr>
            </ng-template>
    
            <ng-template pTemplate="body" let-doctor>
              <tr>
                <td class="img-container p-0">
                  <img
                  [src]="
                    doctor.imagenBase64 != undefined
                      ? (doctor.imagenBase64 | urlImagen : doctor?.tipoMime)
                      : 'assets/img/default-user.jpg'
                  "
                />
                </td>
    
                <td class="asistente-cell">
                  <span class="asistente-name" >{{ doctor.nombreAsistente }}</span>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </ng-template>

      <div class="col-md-6" style="min-height: 30vh;" *ngIf="!esAsistente">
        <h2 class="text-center"> Asistentes disponibles </h2>
        <p-table
          class="primeng-table grid-cuadricula"
          [value]="auxiliares"
          dataKey="idUsuario"
          [autoLayout]="true"
          *ngIf="auxiliares"
        >
          <ng-template pTemplate="header">
            <tr>
              <th class="text-center">Imagen</th>
              <th class="text-center">Nombre del Asistente</th>
            </tr>
          </ng-template>
  
          <ng-template pTemplate="body" let-doctor>
            <tr>
              <td class="img-container p-0">
                <img
                [src]="
                  doctor.imagenBase64 != undefined
                    ? (doctor.imagenBase64)
                    : 'assets/img/default-user.jpg'
                "
              />
              </td>
  
              <td class="asistente-cell">
                <span class="asistente-name">{{ doctor.nombreCompleto }}</span>
                <button class="btn" *ngIf="!esAsistente" (click)="agregarAsistente(doctor)">
                  <i class="fas fa-plus-circle"></i> 
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </ng-template>
</app-modal-base>